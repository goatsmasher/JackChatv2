{"version":3,"sources":["webpack:///server.js","webpack:///webpack/bootstrap 4f649250f3d8577f9dc0","webpack:///./src/server/server.js","webpack:///external \"source-map-support/register\"","webpack:///./src/shared/operators.js","webpack:///external \"rxjs\"","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///external \"chalk\"","webpack:///./src/shared/observable-socket.js","webpack:///./src/server/modules/users.js","webpack:///external \"lodash\"","webpack:///./src/server/lib/module.js","webpack:///./src/shared/validation/users.js","webpack:///./src/shared/validator.js","webpack:///./src/server/modules/playlist.js","webpack:///./src/server/modules/chat.js","webpack:///./src/shared/validation/chat.js","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///external \"webpack\"","webpack:///./webpack.client.js","webpack:///external \"path\"","webpack:///external \"extract-text-webpack-plugin\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","startServer","server","listen","port","console","log","_express","_express2","_http","_http2","_socket","_socket2","_chalk","_chalk2","_rxjs","_observableSocket","_users","_playlist","_chat","isDevelopment","process","env","NODE_ENV","app","Server","io","USE_WEBPACK","webpackMiddleware","webpackHotMiddleware","webpack","clientConfig","compiler","use","publicPath","stats","colors","chunks","assets","timings","hash","version","bgRed","set","static","useExternalStyles","get","req","res","render","videoServices","playlistRepository","users","UsersModule","chat","ChatModule","playlist","PlaylistModule","on","socket","request","connection","remoteAddress","client","ObservableSocket","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","mod","value","registerClient","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","clientRegistered","PORT","Observable","merge","apply","map","init$","subscribe","complete","error","require","prototype","safeSubscribe","subscription","this","item","e","stack","unsubscribe","catchWrap","catch","of","_classCallCheck","instance","Constructor","TypeError","clientMessage","message","Error","fail","throw","success","successObservable","Object","defineProperty","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","empty","_this","_state","_actionCallbacks","_requests","_nextRequestId","status$","on$","isConnected","attempt","isReconnecting","isTotallyDead","publishReplay","refCount","state","event","fromEvent","callback","off","arg","emit","action","_registerCallbacks","subject","ReplaySubject","_this2","hasOwnProperty","_popRequest","_this3","requestId","hasValue","_emitError","actions","onAction","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_lodash","_lodash2","_module","AuthContext","_ModuleBase","getPrototypeOf","_io","_userList","username","reduce","ch","charCodeAt","Math","abs","hue","saturation","lightness","auth","isLoggedIn","trim","validator","validateLogin","isValid","throw$","name","color","getColorForUsername","push","getUserForClient","index","indexOf","splice","onActions","users:list","auth:login","_ref","loginClient$","auth:logout","logoutClient$","ModuleBase","_validator","Validator","USERNAME_REGEX","test","_errors","join","errors","usersModule","_repository","_services","MAX_HISTORY","BATCH_SIZE","_chatLog","user","type","validateSendMessage","newMessage","time","Date","getTime","chat:list","chat:add","sendMessage","includes","MESSAGE_TYPES","createConfig","isDebug","devTool","plugins","optimize","CommonsChunkPlugin","cssLoader","loader","sassLoader","appEntry","HotModuleReplacementPlugin","UglifyJsPlugin","ExtractTextPlugin","extract","devtool","entry","application","vendor","vendorModules","output","path","dirname","filename","resolve","alias","shared","loaders","exclude"],"mappings":"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","file":"server.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(2);\n\t\n\tvar _express = __webpack_require__(4);\n\t\n\tvar _express2 = _interopRequireDefault(_express);\n\t\n\tvar _http = __webpack_require__(5);\n\t\n\tvar _http2 = _interopRequireDefault(_http);\n\t\n\tvar _socket = __webpack_require__(6);\n\t\n\tvar _socket2 = _interopRequireDefault(_socket);\n\t\n\tvar _chalk = __webpack_require__(7);\n\t\n\tvar _chalk2 = _interopRequireDefault(_chalk);\n\t\n\tvar _rxjs = __webpack_require__(3);\n\t\n\tvar _observableSocket = __webpack_require__(8);\n\t\n\tvar _users = __webpack_require__(9);\n\t\n\tvar _playlist = __webpack_require__(14);\n\t\n\tvar _chat = __webpack_require__(15);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar isDevelopment = process.env.NODE_ENV !== \"production\";\n\t\n\t// Setup\n\tvar app = (0, _express2.default)(),\n\t    server = new _http2.default.Server(app),\n\t    io = (0, _socket2.default)(server);\n\t\n\t// Client Webpack\n\tif (process.env.USE_WEBPACK === \"true\") {\n\t    var webpackMiddleware = __webpack_require__(17),\n\t        webpackHotMiddleware = __webpack_require__(18),\n\t        webpack = __webpack_require__(19),\n\t        clientConfig = __webpack_require__(20);\n\t\n\t    var compiler = webpack(clientConfig);\n\t    app.use(webpackMiddleware(compiler, {\n\t        publicPath: \"/build/\",\n\t        stats: {\n\t            colors: true,\n\t            chunks: false,\n\t            assets: false,\n\t            modules: false,\n\t            timings: false,\n\t            hash: false,\n\t            version: false\n\t        }\n\t    }));\n\t    app.use(webpackHotMiddleware(compiler));\n\t\n\t    console.log(_chalk2.default.bgRed(\"Using WebPack Dev Middleware!!! FOR DEV ENVIRONMENT ONLY\"));\n\t}\n\t\n\t// Configure Express\n\tapp.set(\"view engine\", \"jade\");\n\tapp.use(_express2.default.static(\"public\"));\n\t\n\tvar useExternalStyles = !isDevelopment;\n\tapp.get(\"/\", function (req, res) {\n\t    res.render(\"index\", {\n\t        useExternalStyles: useExternalStyles\n\t    });\n\t});\n\t\n\t// Services\n\tvar videoServices = [];\n\tvar playlistRepository = {};\n\t\n\t// Modules\n\tvar users = new _users.UsersModule(io);\n\tvar chat = new _chat.ChatModule(io, users);\n\tvar playlist = new _playlist.PlaylistModule(io, users, playlistRepository, videoServices);\n\tvar modules = [users, chat, playlist];\n\t\n\t// Socket\n\tio.on(\"connection\", function (socket) {\n\t    console.log(\"Got connection from \" + socket.request.connection.remoteAddress);\n\t\n\t    var client = new _observableSocket.ObservableSocket(socket);\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t        for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var mod = _step.value;\n\t\n\t            mod.registerClient(client);\n\t        }\n\t    } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t    } finally {\n\t        try {\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t            }\n\t        } finally {\n\t            if (_didIteratorError) {\n\t                throw _iteratorError;\n\t            }\n\t        }\n\t    }\n\t\n\t    var _iteratorNormalCompletion2 = true;\n\t    var _didIteratorError2 = false;\n\t    var _iteratorError2 = undefined;\n\t\n\t    try {\n\t        for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t            var _mod = _step2.value;\n\t\n\t            _mod.clientRegistered(client);\n\t        }\n\t    } catch (err) {\n\t        _didIteratorError2 = true;\n\t        _iteratorError2 = err;\n\t    } finally {\n\t        try {\n\t            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t                _iterator2.return();\n\t            }\n\t        } finally {\n\t            if (_didIteratorError2) {\n\t                throw _iteratorError2;\n\t            }\n\t        }\n\t    }\n\t});\n\t\n\t// Startup\n\tvar port = process.env.PORT || 3000;\n\tfunction startServer() {\n\t    server.listen(port, function () {\n\t        return console.log(\"Started http server on \" + port);\n\t    });\n\t}\n\t\n\t_rxjs.Observable.merge.apply(_rxjs.Observable, _toConsumableArray(modules.map(function (m) {\n\t    return m.init$();\n\t}))).subscribe({\n\t    complete: function complete() {\n\t        startServer();\n\t    },\n\t    error: function error(_error) {\n\t        console.error(\"Could not init module: $(error.stack || error}\");\n\t    }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"source-map-support/register\");\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _rxjs = __webpack_require__(3);\n\t\n\t_rxjs.Observable.prototype.safeSubscribe = function (next, error, complete) {\n\t    var subscription = this.subscribe(function (item) {\n\t        try {\n\t            next(item);\n\t        } catch (e) {\n\t            console.error(e.stack || e);\n\t            subscription.unsubscribe();\n\t        }\n\t    }, error, complete);\n\t    return subscription;\n\t};\n\t\n\t_rxjs.Observable.prototype.catchWrap = function () {\n\t    return this.catch(function (error) {\n\t        return _rxjs.Observable.of({ error: error });\n\t    });\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"rxjs\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"express\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"http\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"socket.io\");\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"chalk\");\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.ObservableSocket = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.clientMessage = clientMessage;\n\texports.fail = fail;\n\texports.success = success;\n\t\n\tvar _rxjs = __webpack_require__(3);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction clientMessage(message) {\n\t    var error = new Error(message);\n\t    error.clientMessage = message;\n\t    return error;\n\t}\n\t\n\tfunction fail(message) {\n\t    return _rxjs.Observable.throw({ clientMessage: message });\n\t}\n\t\n\tvar successObservable = _rxjs.Observable.empty();\n\tfunction success() {\n\t    return successObservable;\n\t}\n\t\n\tvar ObservableSocket = exports.ObservableSocket = function () {\n\t    _createClass(ObservableSocket, [{\n\t        key: \"isConnected\",\n\t        get: function get() {\n\t            return this._state.isConnected;\n\t        }\n\t    }, {\n\t        key: \"isReconnecting\",\n\t        get: function get() {\n\t            return this._state.isReconnecting;\n\t        }\n\t    }, {\n\t        key: \"isTotallyDead\",\n\t        get: function get() {\n\t            return !this.isConnected && !this.isReconnecting;\n\t        }\n\t    }]);\n\t\n\t    function ObservableSocket(socket) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, ObservableSocket);\n\t\n\t        this._socket = socket;\n\t        this._state = {};\n\t        this._actionCallbacks = {};\n\t        this._requests = {};\n\t        this._nextRequestId = 0;\n\t\n\t        this.status$ = _rxjs.Observable.merge(this.on$(\"connect\").map(function () {\n\t            return { isConnected: true };\n\t        }), this.on$(\"disconnect\").map(function () {\n\t            return { isConnected: false };\n\t        }), this.on$(\"reconnecting\").map(function (attempt) {\n\t            return { isConnected: false, isReconnecting: true, attempt: attempt };\n\t        }), this.on$(\"reconnect_failed\").map(function () {\n\t            return { isTotallyDead: true };\n\t        })).publishReplay(1).refCount();\n\t\n\t        this.status$.subscribe(function (state) {\n\t            return _this._state = state;\n\t        });\n\t    }\n\t    // Basic Wrappers\n\t\n\t\n\t    _createClass(ObservableSocket, [{\n\t        key: \"on$\",\n\t        value: function on$(event) {\n\t            return _rxjs.Observable.fromEvent(this._socket, event);\n\t        }\n\t    }, {\n\t        key: \"on\",\n\t        value: function on(event, callback) {\n\t            this._socket.on(event, callback);\n\t        }\n\t    }, {\n\t        key: \"off\",\n\t        value: function off(event, callback) {\n\t            this._socket.off(event, callback);\n\t        }\n\t    }, {\n\t        key: \"emit\",\n\t        value: function emit(event, arg) {\n\t            this._socket.emit(event, arg);\n\t        }\n\t    }, {\n\t        key: \"emitAction$\",\n\t        value: function emitAction$(action, arg) {\n\t            var id = this._nextRequestId++;\n\t            this._registerCallbacks(action);\n\t\n\t            var subject = this._requests[id] = new _rxjs.ReplaySubject(1);\n\t            this._socket.emit(action, arg, id);\n\t            return subject;\n\t        }\n\t    }, {\n\t        key: \"_registerCallbacks\",\n\t        value: function _registerCallbacks(action) {\n\t            var _this2 = this;\n\t\n\t            if (this._actionCallbacks.hasOwnProperty(action)) {\n\t                return;\n\t            }\n\t\n\t            this._socket.on(action, function (arg, id) {\n\t                var request = _this2._popRequest(id);\n\t                if (!request) {\n\t                    return;\n\t                }\n\t                request.next(arg);\n\t                request.complete();\n\t            });\n\t\n\t            this._socket.on(action + \":fail\", function (arg, id) {\n\t                var request = _this2._popRequest(id);\n\t                if (!request) {\n\t                    return;\n\t                }\n\t                request.error(arg);\n\t            });\n\t\n\t            this._actionCallbacks[action] = true;\n\t        }\n\t    }, {\n\t        key: \"_popRequest\",\n\t        value: function _popRequest(id) {\n\t            if (!this._requests.hasOwnProperty(id)) {\n\t                console.error(\"No such ID exists in _requests - \" + id);\n\t                return;\n\t            }\n\t            var request = this._requests[id];\n\t            delete this._requests[id];\n\t            return request;\n\t        }\n\t    }, {\n\t        key: \"onAction\",\n\t        value: function onAction(action, callback) {\n\t            var _this3 = this;\n\t\n\t            this._socket.on(action, function (arg, requestId) {\n\t                try {\n\t                    var value = callback(arg);\n\t                    if (!value) {\n\t                        _this3._socket.emit(action, null, requestId);\n\t                        return;\n\t                    }\n\t\n\t                    if (typeof value.subscribe !== \"function\") {\n\t                        _this3._socket.emit(action, value, requestId);\n\t                        return;\n\t                    }\n\t\n\t                    var hasValue = false;\n\t                    value.subscribe({\n\t                        next: function next(item) {\n\t                            if (hasValue) {\n\t                                throw new Error(\"Action \" + action + \" produced more than one value.\");\n\t                            }\n\t                            _this3._socket.emit(action, item, requestId);\n\t                            hasValue = true;\n\t                        },\n\t                        error: function error(_error) {\n\t                            _this3._emitError(action, requestId, _error);\n\t                            console.error(_error.stack || _error);\n\t                        },\n\t                        complete: function complete() {\n\t                            if (!hasValue) {\n\t                                _this3._socket.emit(action, null, requestId);\n\t                            }\n\t                        }\n\t                    });\n\t                } catch (error) {\n\t                    if (typeof requestId !== \"undefined\") {\n\t                        _this3._emitError(action, requestId, error);\n\t                    }\n\t                    console.error(error.stack || error);\n\t                }\n\t            });\n\t        }\n\t    }, {\n\t        key: \"onActions\",\n\t        value: function onActions(actions) {\n\t            for (var action in actions) {\n\t                if (!actions.hasOwnProperty(action)) {\n\t                    continue;\n\t                }\n\t                this.onAction(action, actions[action]);\n\t            }\n\t        }\n\t    }, {\n\t        key: \"_emitError\",\n\t        value: function _emitError(action, id, error) {\n\t            var message = error && error.clientMessage || \"Fatal Error\";\n\t            this._socket.emit(action + \":fail\", { message: message }, id);\n\t        }\n\t    }]);\n\n\t    return ObservableSocket;\n\t}();\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.UsersModule = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(10);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _module = __webpack_require__(11);\n\t\n\tvar _users = __webpack_require__(12);\n\t\n\tvar _observableSocket = __webpack_require__(8);\n\t\n\tvar _rxjs = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar AuthContext = Symbol(\"AuthContext\");\n\t\n\tvar UsersModule = exports.UsersModule = function (_ModuleBase) {\n\t    _inherits(UsersModule, _ModuleBase);\n\t\n\t    function UsersModule(io) {\n\t        _classCallCheck(this, UsersModule);\n\t\n\t        var _this = _possibleConstructorReturn(this, (UsersModule.__proto__ || Object.getPrototypeOf(UsersModule)).call(this));\n\t\n\t        _this._io = io;\n\t        _this._userList = [];\n\t        _this._users = {};\n\t        return _this;\n\t    }\n\t\n\t    _createClass(UsersModule, [{\n\t        key: \"getColorForUsername\",\n\t        value: function getColorForUsername(username) {\n\t            var hash = _lodash2.default.reduce(username, function (hash, ch) {\n\t                return ch.charCodeAt(0) + (hash << 6) + (hash << 16) - hash;\n\t            }, 0);\n\t            hash = Math.abs(hash);\n\t            var hue = hash % 360,\n\t                saturation = hash % 25 + 70,\n\t                lightness = 100 - (hash % 15 + 35);\n\t\n\t            return \"hsl(\" + hue + \", \" + saturation + \"%, \" + lightness + \"%)\";\n\t        }\n\t    }, {\n\t        key: \"getUserForClient\",\n\t        value: function getUserForClient(client) {\n\t            var auth = client[AuthContext];\n\t            if (!auth) {\n\t                return null;\n\t            }\n\t            return auth.isLoggedIn ? auth : null;\n\t        }\n\t    }, {\n\t        key: \"loginClient$\",\n\t        value: function loginClient$(client, username) {\n\t            username = username.trim();\n\t\n\t            var validator = (0, _users.validateLogin)(username);\n\t            if (!validator.isValid) {\n\t                return validator.throw$();\n\t            }\n\t            if (this._users.hasOwnProperty(username)) {\n\t                return (0, _observableSocket.fail)(\"Username \" + username + \" is already taken\");\n\t            }\n\t\n\t            var auth = client[AuthContext] || (client[AuthContext] = {});\n\t            if (auth.isLoggedIn) {\n\t                return (0, _observableSocket.fail)(\"You are already logged in\");\n\t            }\n\t            auth.name = username;\n\t            auth.color = this.getColorForUsername(username);\n\t            auth.isLoggedIn = true;\n\t\n\t            this._users[username] = client;\n\t            this._userList.push(auth);\n\t\n\t            this._io.emit(\"users:added\", auth);\n\t            return _rxjs.Observable.of(auth);\n\t        }\n\t    }, {\n\t        key: \"logoutClient$\",\n\t        value: function logoutClient$(client) {\n\t            var auth = this.getUserForClient(client);\n\t            if (!auth) {\n\t                return;\n\t            }\n\t            var index = this._userList.indexOf(auth);\n\t            this._userList.splice(index, 1);\n\t            delete this._users[auth.name];\n\t            delete client[AuthContext];\n\t\n\t            this._io.emit(\"users:removed\", auth);\n\t        }\n\t    }, {\n\t        key: \"registerClient\",\n\t        value: function registerClient(client) {\n\t            var _this2 = this;\n\t\n\t            client.onActions({\n\t                \"users:list\": function usersList() {\n\t                    return _this2._userList;\n\t                },\n\t                \"auth:login\": function authLogin(_ref) {\n\t                    var name = _ref.name;\n\t\n\t                    return _this2.loginClient$(client, name);\n\t                },\n\t                \"auth:logout\": function authLogout() {\n\t                    _this2.logoutClient$(client);\n\t                }\n\t            });\n\t            client.on(\"disconnect\", function () {\n\t                _this2.logoutClient$(client);\n\t            });\n\t        }\n\t    }]);\n\n\t    return UsersModule;\n\t}(_module.ModuleBase);\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"lodash\");\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.ModuleBase = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _rxjs = __webpack_require__(3);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ModuleBase = exports.ModuleBase = function () {\n\t    function ModuleBase() {\n\t        _classCallCheck(this, ModuleBase);\n\t    }\n\t\n\t    _createClass(ModuleBase, [{\n\t        key: \"init$\",\n\t        value: function init$() {\n\t            return _rxjs.Observable.empty();\n\t        }\n\t    }, {\n\t        key: \"registerClient\",\n\t        value: function registerClient(client) {}\n\t    }, {\n\t        key: \"clientRegistered\",\n\t        value: function clientRegistered(client) {}\n\t    }]);\n\n\t    return ModuleBase;\n\t}();\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.USERNAME_REGEX = undefined;\n\texports.validateLogin = validateLogin;\n\t\n\tvar _validator = __webpack_require__(13);\n\t\n\tvar USERNAME_REGEX = exports.USERNAME_REGEX = /^[\\w\\d_-]+$/;\n\t\n\tfunction validateLogin(username) {\n\t    var validator = new _validator.Validator();\n\t\n\t    if (username.length >= 20) {\n\t        validator.error(\"Username must be fewer than 20 characters\");\n\t    }\n\t    if (!USERNAME_REGEX.test(username)) {\n\t        validator.error(\"Username can only contain letters, numbers, underscores and dashes\");\n\t    }\n\t    return validator;\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Validator = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _rxjs = __webpack_require__(3);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Validator = exports.Validator = function () {\n\t    _createClass(Validator, [{\n\t        key: \"isValid\",\n\t        get: function get() {\n\t            return !this._errors.length;\n\t        }\n\t    }, {\n\t        key: \"errors\",\n\t        get: function get() {\n\t            return this._errors;\n\t        }\n\t    }, {\n\t        key: \"message\",\n\t        get: function get() {\n\t            return this._errors.join(\", \");\n\t        }\n\t    }]);\n\t\n\t    function Validator() {\n\t        _classCallCheck(this, Validator);\n\t\n\t        this._errors = [];\n\t    }\n\t\n\t    _createClass(Validator, [{\n\t        key: \"error\",\n\t        value: function error(message) {\n\t            this._errors.push(message);\n\t        }\n\t    }, {\n\t        key: \"toObject\",\n\t        value: function toObject() {\n\t            if (this.isValid) {\n\t                return {};\n\t            }\n\t            return {\n\t                errors: this._errors,\n\t                message: this.message\n\t            };\n\t        }\n\t    }, {\n\t        key: \"throw$\",\n\t        value: function throw$() {\n\t            return _rxjs.Observable.throw({\n\t                clientMessage: this.message\n\t            });\n\t        }\n\t    }]);\n\n\t    return Validator;\n\t}();\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.PlaylistModule = undefined;\n\t\n\tvar _module = __webpack_require__(11);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistModule = exports.PlaylistModule = function (_ModuleBase) {\n\t    _inherits(PlaylistModule, _ModuleBase);\n\t\n\t    function PlaylistModule(io, usersModule, playlistRepository, videoServices) {\n\t        _classCallCheck(this, PlaylistModule);\n\t\n\t        var _this = _possibleConstructorReturn(this, (PlaylistModule.__proto__ || Object.getPrototypeOf(PlaylistModule)).call(this));\n\t\n\t        _this._io = io;\n\t        _this._users = usersModule;\n\t        _this._repository = playlistRepository;\n\t        _this._services = videoServices;\n\t        return _this;\n\t    }\n\t\n\t    return PlaylistModule;\n\t}(_module.ModuleBase);\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.ChatModule = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _module = __webpack_require__(11);\n\t\n\tvar _chat = __webpack_require__(16);\n\t\n\tvar _observableSocket = __webpack_require__(8);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar MAX_HISTORY = 250;\n\tvar BATCH_SIZE = 25;\n\t\n\tvar ChatModule = exports.ChatModule = function (_ModuleBase) {\n\t    _inherits(ChatModule, _ModuleBase);\n\t\n\t    function ChatModule(io, usersModule) {\n\t        _classCallCheck(this, ChatModule);\n\t\n\t        var _this = _possibleConstructorReturn(this, (ChatModule.__proto__ || Object.getPrototypeOf(ChatModule)).call(this));\n\t\n\t        _this._io = io;\n\t        _this._users = usersModule;\n\t        _this._chatLog = [];\n\t        return _this;\n\t    }\n\t\n\t    _createClass(ChatModule, [{\n\t        key: \"sendMessage\",\n\t        value: function sendMessage(user, message, type) {\n\t            message = message.trim();\n\t            var validator = (0, _chat.validateSendMessage)(user, message, type);\n\t            if (!validator.isValid) {\n\t                return validator.throw$();\n\t            }\n\t            var newMessage = {\n\t                user: { name: user.name, color: user.color },\n\t                message: message,\n\t                time: new Date().getTime(),\n\t                type: type\n\t            };\n\t            this._chatLog.push(newMessage);\n\t\n\t            if (this._chatLog.length >= MAX_HISTORY) {\n\t                this._chatLog.splice(0, BATCH_SIZE);\n\t            }\n\t            this._io.emit(\"chat:added\", newMessage);\n\t        }\n\t    }, {\n\t        key: \"registerClient\",\n\t        value: function registerClient(client) {\n\t            var _this2 = this;\n\t\n\t            client.onActions({\n\t                \"chat:list\": function chatList() {\n\t                    return _this2._chatLog;\n\t                },\n\t                \"chat:add\": function chatAdd(_ref) {\n\t                    var message = _ref.message,\n\t                        type = _ref.type;\n\t\n\t                    type = type || \"normal\";\n\t\n\t                    var user = _this2._users.getUserForClient(client);\n\t                    if (!user) {\n\t                        return (0, _observableSocket.fail)(\"You must be logged in\");\n\t                    } else {\n\t                        _this2.sendMessage(user, message, type);\n\t                    }\n\t                }\n\t            });\n\t        }\n\t    }]);\n\n\t    return ChatModule;\n\t}(_module.ModuleBase);\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.MESSAGE_TYPES = undefined;\n\texports.validateSendMessage = validateSendMessage;\n\t\n\tvar _lodash = __webpack_require__(10);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _validator = __webpack_require__(13);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MESSAGE_TYPES = exports.MESSAGE_TYPES = [\"normal\"];\n\t\n\tfunction validateSendMessage(user, message, type) {\n\t    var validator = new _validator.Validator();\n\t\n\t    if (message.length > 50) {\n\t        validator.error(\"Message must be smaller 50 characters\");\n\t    }\n\t    if (!_lodash2.default.includes(MESSAGE_TYPES, type)) {\n\t        validator.error(\"Invalid message type: \" + type);\n\t    }\n\t    if (message.trim().length === 0) {\n\t        validator.error(\"Message cannot be blank\");\n\t    }\n\t\n\t    return validator;\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack-dev-middleware\");\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack-hot-middleware\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar path = __webpack_require__(21),\n\t    webpack = __webpack_require__(19),\n\t    ExtractTextPlugin = __webpack_require__(22);\n\t\n\tvar dirname = path.resolve(\"./\");\n\tvar vendorModules = [\"jquery\", \"lodash\", \"socket.io-client\", \"rxjs\"];\n\t\n\tfunction createConfig(isDebug) {\n\t    var devTool = isDebug ? \"eval-source-map\" : \"source-map\";\n\t    var plugins = [new webpack.optimize.CommonsChunkPlugin(\"vendor\", \"vendor.js\")];\n\t\n\t    var cssLoader = { test: /\\.css$/, loader: \"style!css\" };\n\t    var sassLoader = { test: /\\.scss$/, loader: \"style!css!sass\" };\n\t    var appEntry = [\"./src/client/application.js\"];\n\t\n\t    if (!isDebug) {\n\t        plugins.push(new webpack.optimize.UglifyJsPlugin());\n\t        plugins.push(new ExtractTextPlugin(\"[name].css\"));\n\t\n\t        cssLoader.loader = ExtractTextPlugin.extract(\"style\", \"css\");\n\t        sassLoader.loader = ExtractTextPlugin.extract(\"style\", \"css!sass\");\n\t    } else {\n\t        plugins.push(new webpack.HotModuleReplacementPlugin());\n\t        appEntry.splice(0, 0, \"webpack-hot-middleware/client\");\n\t    }\n\t\n\t    //webpack config\n\t    return {\n\t        devtool: devTool,\n\t        entry: {\n\t            application: appEntry,\n\t            vendor: vendorModules\n\t        },\n\t        output: {\n\t            path: path.join(dirname, \"public\", \"build\"),\n\t            filename: \"[name].js\",\n\t            publicPath: \"/build/\"\n\t        },\n\t        resolve: {\n\t            alias: {\n\t                shared: path.join(dirname, \"src\", \"shared\")\n\t            }\n\t        },\n\t        module: {\n\t            loaders: [{ test: /\\.js$/, loader: \"babel\", exclude: /node_modules/ }, { test: /\\.js$/, loader: \"eslint\", exclude: /node_modules/ }, { test: /\\.(png|jpg|jpeg|gif|woff|ttf|eot|svg|woff2)/, loader: \"url-loader?limit=1024\" }, cssLoader, sassLoader]\n\t        },\n\t        plugins: plugins\n\t    };\n\t}\n\t\n\tmodule.exports = createConfig(true);\n\tmodule.exports.create = createConfig;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"extract-text-webpack-plugin\");\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// server.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4f649250f3d8577f9dc0","import \"source-map-support/register\";\r\nimport \"shared/operators\";\r\nimport express from \"express\";\r\nimport http from \"http\";\r\nimport socketIo from \"socket.io\";\r\nimport chalk from \"chalk\";\r\nimport { Observable } from \"rxjs\";\r\nimport { ObservableSocket } from \"shared/observable-socket\";\r\nimport { UsersModule } from \"./modules/users\";\r\nimport { PlaylistModule } from \"./modules/playlist\";\r\nimport { ChatModule } from \"./modules/chat\";\r\n\r\nconst isDevelopment = process.env.NODE_ENV !== \"production\";\r\n\r\n// Setup\r\nconst app = express(),\r\n    server = new http.Server(app),\r\n    io = socketIo(server);\r\n\r\n// Client Webpack\r\nif (process.env.USE_WEBPACK === \"true\") {\r\n    var webpackMiddleware = require(\"webpack-dev-middleware\"),\r\n        webpackHotMiddleware = require(\"webpack-hot-middleware\"),\r\n        webpack = require(\"webpack\"),\r\n        clientConfig = require(\"../../webpack.client\");\r\n\r\n    const compiler = webpack(clientConfig);\r\n    app.use(webpackMiddleware(compiler, {\r\n        publicPath: \"/build/\",\r\n        stats: {\r\n            colors: true,\r\n            chunks: false,\r\n            assets: false,\r\n            modules: false,\r\n            timings: false,\r\n            hash: false,\r\n            version: false\r\n        }\r\n    }));\r\n    app.use(webpackHotMiddleware(compiler));\r\n\r\n    console.log(chalk.bgRed(\"Using WebPack Dev Middleware!!! FOR DEV ENVIRONMENT ONLY\"));\r\n}\r\n\r\n// Configure Express\r\napp.set(\"view engine\", \"jade\");\r\napp.use(express.static(\"public\"));\r\n\r\nconst useExternalStyles = !isDevelopment;\r\napp.get(\"/\", (req, res) => {\r\n    res.render(\"index\", {\r\n        useExternalStyles\r\n    });\r\n});\r\n\r\n// Services\r\nconst videoServices = [];\r\nconst playlistRepository = {};\r\n\r\n// Modules\r\nconst users = new UsersModule(io);\r\nconst chat = new ChatModule(io, users);\r\nconst playlist = new PlaylistModule(io, users, playlistRepository, videoServices);\r\nconst modules = [users, chat, playlist];\r\n\r\n// Socket\r\nio.on(\"connection\", socket => {\r\n    console.log(`Got connection from ${socket.request.connection.remoteAddress}`);\r\n\r\n    const client = new ObservableSocket(socket);\r\n    for (let mod of modules) {\r\n        mod.registerClient(client);\r\n    }\r\n    for (let mod of modules) {\r\n        mod.clientRegistered(client);\r\n    }\r\n});\r\n\r\n// Startup\r\nconst port = process.env.PORT || 3000;\r\nfunction startServer() {\r\n    server.listen(port, () =>\r\n        console.log(`Started http server on ${port}`));\r\n}\r\n\r\nObservable.merge(...modules.map(m => m.init$()))\r\n    .subscribe({\r\n        complete() {\r\n            startServer();\r\n        },\r\n        error(error) {\r\n            console.error(`Could not init module: $(error.stack || error}`);\r\n        }\r\n    });\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/server.js","module.exports = require(\"source-map-support/register\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map-support/register\"\n// module id = 1\n// module chunks = 0","import {Observable} from \"rxjs\";\r\n\r\nObservable.prototype.safeSubscribe = function(next, error, complete) {\r\n    const subscription = this.subscribe(\r\n        item => {\r\n            try {\r\n                next(item);\r\n            } catch (e) {\r\n                console.error(e.stack || e);\r\n                subscription.unsubscribe();\r\n            }\r\n        },\r\n        error,\r\n        complete);\r\n    return subscription;\r\n};\r\n\r\nObservable.prototype.catchWrap = function() {\r\n    return this.catch(error => Observable.of({error: error}));\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/shared/operators.js","module.exports = require(\"rxjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 7\n// module chunks = 0","import { Observable, ReplaySubject } from \"rxjs\";\r\n\r\nexport function clientMessage(message) {\r\n    const error = new Error(message);\r\n    error.clientMessage = message;\r\n    return error;\r\n}\r\n\r\nexport function fail(message) {\r\n    return Observable.throw({clientMessage: message});\r\n}\r\n\r\nlet successObservable = Observable.empty();\r\nexport function success() {\r\n    return successObservable;\r\n}\r\n\r\nexport class ObservableSocket {\r\n\r\n    get isConnected() { return this._state.isConnected; }\r\n    get isReconnecting() { return this._state.isReconnecting; }\r\n    get isTotallyDead() { return !this.isConnected && !this.isReconnecting; }\r\n\r\n    constructor(socket) {\r\n        this._socket = socket;\r\n        this._state = {};\r\n        this._actionCallbacks = {};\r\n        this._requests = {};\r\n        this._nextRequestId = 0;\r\n\r\n        this.status$ = Observable.merge(\r\n            this.on$(\"connect\").map(() => ({ isConnected: true })),\r\n            this.on$(\"disconnect\").map(() => ({ isConnected: false })),\r\n            this.on$(\"reconnecting\").map(attempt => ({ isConnected: false, isReconnecting: true, attempt })),\r\n            this.on$(\"reconnect_failed\").map(() => ({ isTotallyDead: true })))\r\n            .publishReplay(1)\r\n            .refCount();\r\n\r\n        this.status$.subscribe(state => this._state = state);\r\n    }\r\n    // Basic Wrappers\r\n    on$(event) {\r\n        return Observable.fromEvent(this._socket, event);\r\n    }\r\n    on(event, callback) {\r\n        this._socket.on(event, callback);\r\n    }\r\n    off(event, callback) {\r\n        this._socket.off(event, callback);\r\n    }\r\n    emit(event, arg) {\r\n        this._socket.emit(event, arg);\r\n    }\r\n\r\n    emitAction$(action, arg) {\r\n        const id = this._nextRequestId++;\r\n        this._registerCallbacks(action);\r\n\r\n        const subject = this._requests[id] = new ReplaySubject(1);\r\n        this._socket.emit(action, arg, id);\r\n        return subject;\r\n\r\n    }\r\n    _registerCallbacks(action) {\r\n        if (this._actionCallbacks.hasOwnProperty(action)) {\r\n            return;\r\n        }\r\n\r\n        this._socket.on(action, (arg, id) => {\r\n            const request = this._popRequest(id);\r\n            if (!request) {\r\n                return;\r\n            }\r\n            request.next(arg);\r\n            request.complete();\r\n        });\r\n\r\n        this._socket.on(`${action}:fail`, (arg, id) => {\r\n            const request = this._popRequest(id);\r\n            if (!request) {\r\n                return;\r\n            }\r\n            request.error(arg);\r\n        });\r\n\r\n        this._actionCallbacks[action] = true;\r\n    }\r\n    _popRequest(id) {\r\n        if (!this._requests.hasOwnProperty(id)) {\r\n            console.error(`No such ID exists in _requests - ${id}`);\r\n            return;\r\n        }\r\n        const request = this._requests[id];\r\n        delete this._requests[id];\r\n        return request;\r\n    }\r\n\r\n\r\n    onAction(action, callback) {\r\n        this._socket.on(action, (arg, requestId) => {\r\n            try {\r\n                const value = callback(arg);\r\n                if (!value) {\r\n                    this._socket.emit(action, null, requestId);\r\n                    return;\r\n                }\r\n\r\n                if (typeof (value.subscribe) !== \"function\") {\r\n                    this._socket.emit(action, value, requestId);\r\n                    return;\r\n                }\r\n\r\n                let hasValue = false;\r\n                value.subscribe({\r\n                    next: (item) => {\r\n                        if (hasValue) {\r\n                            throw new Error(`Action ${action} produced more than one value.`);\r\n                        }\r\n                        this._socket.emit(action, item, requestId);\r\n                        hasValue = true;\r\n                    },\r\n                    error: (error) => {\r\n                        this._emitError(action, requestId, error);\r\n                        console.error(error.stack || error);\r\n                    },\r\n                    complete: () => {\r\n                        if (!hasValue) {\r\n                            this._socket.emit(action, null, requestId);\r\n                        }\r\n                    }\r\n                });\r\n\r\n            } catch (error) {\r\n                if (typeof (requestId) !== \"undefined\") {\r\n                    this._emitError(action, requestId, error);\r\n                }\r\n                console.error(error.stack || error);\r\n            }\r\n        });\r\n    }\r\n\r\n    onActions(actions) {\r\n        for (let action in actions) {\r\n            if (!actions.hasOwnProperty(action)) {\r\n                continue;\r\n            }\r\n            this.onAction(action, actions[action]);\r\n        }\r\n    }\r\n\r\n    _emitError(action, id, error) {\r\n        const message = (error && error.clientMessage) || \"Fatal Error\";\r\n        this._socket.emit(`${action}:fail`, { message }, id);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/observable-socket.js","import _ from \"lodash\";\r\nimport { ModuleBase } from \"../lib/module\";\r\nimport { validateLogin } from \"shared/validation/users\";\r\nimport { fail } from \"shared/observable-socket\";\r\nimport { Observable } from \"rxjs\";\r\n\r\nconst AuthContext = Symbol(\"AuthContext\");\r\n\r\nexport class UsersModule extends ModuleBase {\r\n    constructor(io) {\r\n        super();\r\n        this._io = io;\r\n        this._userList = [];\r\n        this._users = {};\r\n    }\r\n\r\n    getColorForUsername(username) {\r\n        let hash = _.reduce(username,\r\n            (hash, ch) => ch.charCodeAt(0) + (hash << 6) + (hash << 16) - hash, 0);\r\n        hash = Math.abs(hash);\r\n        const hue = hash % 360,\r\n            saturation = hash % 25 + 70,\r\n            lightness = 100 - (hash % 15 + 35);\r\n\r\n        return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\r\n    }\r\n\r\n    getUserForClient(client) {\r\n        const auth = client[AuthContext];\r\n        if (!auth) {\r\n            return null;\r\n        }\r\n        return auth.isLoggedIn ? auth : null;\r\n    }\r\n\r\n    loginClient$(client, username) {\r\n        username = username.trim();\r\n\r\n        const validator = validateLogin(username);\r\n        if (!validator.isValid) {\r\n            return validator.throw$();\r\n        }\r\n        if (this._users.hasOwnProperty(username)) {\r\n            return fail(`Username ${username} is already taken`);\r\n        }\r\n\r\n        const auth = client[AuthContext] || (client[AuthContext] = {});\r\n        if (auth.isLoggedIn) {\r\n            return fail(\"You are already logged in\");\r\n        }\r\n        auth.name = username;\r\n        auth.color = this.getColorForUsername(username);\r\n        auth.isLoggedIn = true;\r\n\r\n        this._users[username] = client;\r\n        this._userList.push(auth);\r\n\r\n        this._io.emit(\"users:added\", auth);\r\n        return Observable.of(auth);\r\n    }\r\n\r\n    logoutClient$(client) {\r\n        const auth = this.getUserForClient(client);\r\n        if (!auth) {\r\n            return;\r\n        }\r\n        const index = this._userList.indexOf(auth);\r\n        this._userList.splice(index, 1);\r\n        delete this._users[auth.name];\r\n        delete client[AuthContext];\r\n\r\n        this._io.emit(\"users:removed\", auth);\r\n    }\r\n\r\n    registerClient(client) {\r\n        client.onActions({\r\n            \"users:list\": () => {\r\n                return this._userList;\r\n            },\r\n            \"auth:login\": ({ name }) => {\r\n                return this.loginClient$(client, name);\r\n            },\r\n            \"auth:logout\": () => {\r\n                this.logoutClient$(client);\r\n            }\r\n        });\r\n        client.on(\"disconnect\", () => {\r\n            this.logoutClient$(client);\r\n        });\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/users.js","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 10\n// module chunks = 0","import { Observable } from \"rxjs\";\r\n\r\nexport class ModuleBase {\r\n    init$() {\r\n        return Observable.empty();\r\n    }\r\n\r\n    registerClient(client) {\r\n\r\n    }\r\n    clientRegistered(client) {\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/lib/module.js","import {Validator} from \"../validator\";\r\n\r\nexport let USERNAME_REGEX = /^[\\w\\d_-]+$/;\r\n\r\nexport function validateLogin(username) {\r\n    const validator = new Validator();\r\n\r\n    if (username.length >= 20){\r\n        validator.error(\"Username must be fewer than 20 characters\");\r\n    }\r\n    if (!USERNAME_REGEX.test(username)) {\r\n        validator.error(\"Username can only contain letters, numbers, underscores and dashes\");\r\n    }\r\n    return validator;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validation/users.js","import { Observable } from \"rxjs\";\r\n\r\nexport class Validator {\r\n    get isValid() { return !this._errors.length; }\r\n    get errors() { return this._errors; }\r\n    get message() { return this._errors.join(\", \");}\r\n\r\n    constructor() {\r\n        this._errors = [];\r\n    }\r\n\r\n    error(message) {\r\n        this._errors.push(message);\r\n    }\r\n\r\n    toObject() {\r\n        if(this.isValid){\r\n            return {};\r\n        }\r\n        return {\r\n            errors: this._errors,\r\n            message: this.message\r\n        };\r\n    }\r\n\r\n    throw$() {\r\n        return Observable.throw({\r\n            clientMessage: this.message\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validator.js","import {ModuleBase} from \"../lib/module\";\r\n\r\nexport class PlaylistModule extends ModuleBase {\r\n    constructor(io, usersModule, playlistRepository, videoServices) {\r\n        super();\r\n        \r\n        this._io = io;\r\n        this._users = usersModule;\r\n        this._repository = playlistRepository;\r\n        this._services = videoServices;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/playlist.js","import { ModuleBase } from \"../lib/module\";\r\nimport { validateSendMessage } from \"shared/validation/chat\";\r\nimport { fail } from \"shared/observable-socket\";\r\n\r\nconst MAX_HISTORY = 250;\r\nconst BATCH_SIZE = 25;\r\n\r\nexport class ChatModule extends ModuleBase {\r\n    constructor(io, usersModule) {\r\n        super();\r\n        this._io = io;\r\n        this._users = usersModule;\r\n        this._chatLog = [];\r\n    }\r\n\r\n    sendMessage(user, message, type) {\r\n        message = message.trim();\r\n        const validator = validateSendMessage(user, message, type);\r\n        if (!validator.isValid) {\r\n            return validator.throw$();\r\n        }\r\n        const newMessage = {\r\n            user: { name: user.name, color: user.color },\r\n            message: message,\r\n            time: new Date().getTime(),\r\n            type: type\r\n        };\r\n        this._chatLog.push(newMessage);\r\n\r\n        if (this._chatLog.length >= MAX_HISTORY) {\r\n            this._chatLog.splice(0, BATCH_SIZE);\r\n        }\r\n        this._io.emit(\"chat:added\", newMessage);\r\n    }\r\n\r\n    registerClient(client) {\r\n        client.onActions({\r\n            \"chat:list\": () => {\r\n                return this._chatLog;\r\n            },\r\n            \"chat:add\": ({ message, type }) => {\r\n                type = type || \"normal\";\r\n\r\n                const user = this._users.getUserForClient(client);\r\n                if (!user) {\r\n                    return fail(\"You must be logged in\");\r\n                }\r\n                else {\r\n                    this.sendMessage(user, message, type);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/chat.js","import _ from \"lodash\";\r\nimport {Validator} from \"../validator\";\r\n\r\nexport let MESSAGE_TYPES = [\"normal\"];\r\n\r\nexport function validateSendMessage(user, message, type) {\r\n    const validator = new Validator();\r\n\r\n    if (message.length > 50) {\r\n        validator.error(\"Message must be smaller 50 characters\");\r\n    } \r\n    if (!_.includes(MESSAGE_TYPES, type)){\r\n        validator.error(`Invalid message type: ${type}`);\r\n    }\r\n    if (message.trim().length === 0 ){\r\n        validator.error(\"Message cannot be blank\");\r\n    }\r\n\r\n    return validator;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validation/chat.js","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 19\n// module chunks = 0","var path = require(\"path\"),\r\n    webpack = require(\"webpack\"),\r\n    ExtractTextPlugin = require(\"extract-text-webpack-plugin\");\r\n\r\nconst dirname = path.resolve(\"./\");\r\nconst vendorModules = [\"jquery\",\"lodash\", \"socket.io-client\", \"rxjs\"];\r\n\r\nfunction createConfig(isDebug) {\r\n    const devTool = isDebug ? \"eval-source-map\" : \"source-map\";\r\n    const plugins = [new webpack.optimize.CommonsChunkPlugin(\"vendor\", \"vendor.js\")];\r\n\r\n    const cssLoader = { test: /\\.css$/, loader: \"style!css\" };\r\n    const sassLoader = { test: /\\.scss$/, loader: \"style!css!sass\" };\r\n    const appEntry = [\"./src/client/application.js\"];\r\n\r\n    if (!isDebug) {\r\n        plugins.push(new webpack.optimize.UglifyJsPlugin());\r\n        plugins.push(new ExtractTextPlugin(\"[name].css\"));\r\n\r\n        cssLoader.loader = ExtractTextPlugin.extract(\"style\", \"css\");\r\n        sassLoader.loader = ExtractTextPlugin.extract(\"style\", \"css!sass\");\r\n    }\r\n    else {\r\n        plugins.push(new webpack.HotModuleReplacementPlugin());\r\n        appEntry.splice(0,0, \"webpack-hot-middleware/client\");\r\n    }\r\n\r\n    //webpack config\r\n    return {\r\n        devtool: devTool,\r\n        entry: {\r\n            application: appEntry,\r\n            vendor: vendorModules\r\n        },\r\n        output: {\r\n            path: path.join(dirname, \"public\", \"build\"),\r\n            filename: \"[name].js\",\r\n            publicPath: \"/build/\"\r\n        },\r\n        resolve: {\r\n            alias: {\r\n                shared: path.join(dirname, \"src\", \"shared\")\r\n            }\r\n        },\r\n        module: {\r\n            loaders: [\r\n                { test: /\\.js$/, loader: \"babel\", exclude: /node_modules/ },\r\n                { test: /\\.js$/, loader: \"eslint\", exclude: /node_modules/ },\r\n                { test: /\\.(png|jpg|jpeg|gif|woff|ttf|eot|svg|woff2)/, loader: \"url-loader?limit=1024\" },\r\n                cssLoader,\r\n                sassLoader\r\n\r\n            ]\r\n        },\r\n        plugins: plugins\r\n    };\r\n}\r\n\r\nmodule.exports = createConfig(true);\r\nmodule.exports.create = createConfig;\n\n\n// WEBPACK FOOTER //\n// ./webpack.client.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}