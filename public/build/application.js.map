{"version":3,"sources":["webpack:///application.js","webpack:///./src/client/application.js","webpack:///./src/shared/operators.js","webpack:///./src/client/services.js","webpack:///./src/shared/observable-socket.js","webpack:///./src/client/stores/users.js","webpack:///./src/shared/validation/users.js","webpack:///./src/shared/validator.js","webpack:///./src/client/stores/chat.js","webpack:///./src/shared/validation/chat.js","webpack:///./src/client/components/player/player.js","webpack:///./src/client/lib/component.js","webpack:///./src/client/components/users/users.js","webpack:///./src/client/components/chat/chat.js","webpack:///./src/client/components/chat/list.js","webpack:///./src/client/components/chat/form.js","webpack:///./src/client/components/playlist/playlist.js","webpack:///./src/client/components/playlist/list.js","webpack:///./src/client/components/playlist/sort.js","webpack:///./src/client/components/playlist/toolbar.js","webpack:///./src/client/components/playlist/context-menu.js","webpack:///./src/client/components/playlist/chrome.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","1","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","_jquery","_jquery2","_services","services","server","emitAction$","username","password","subscribe","result","error","console","log","$html","usersStore","currentUser$","user","isLoggedIn","removeClass","addClass","socket","connect","3","_rxjs","Observable","safeSubscribe","next","complete","subscription","this","item","e","stack","unsubscribe","catchWrap","catch","of","348","363","defineProperty","value","chatStore","undefined","_socket","_socket2","_observableSocket","_users","_chat","autoConnect","ObservableSocket","UserStore","ChatStore","417","_classCallCheck","instance","Constructor","TypeError","clientMessage","message","Error","fail","throw","success","successObservable","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","protoProps","staticProps","empty","_this","_state","_actionCallbacks","_requests","_nextRequestId","status$","merge","on$","map","isConnected","attempt","isReconnecting","isTotallyDead","publishReplay","refCount","state","get","event","fromEvent","callback","on","off","arg","emit","action","id","_registerCallbacks","subject","ReplaySubject","_this2","request","_popRequest","_this3","requestId","hasValue","_emitError","actions","onAction","418","opList","users","sort","l","r","name","localeCompare","type","opAdd","insertIndex","_lodash2","findIndex","u","splice","opRemove","index","_lodash","_server","defaultStore","events$","state$","scan","last","op","mapTo","startWith","_currentUser","login$","alert","validator","validateLogin","hasErrors","420","_validator","Validator","USERNAME_REGEX","test","421","_errors","join","push","isValid","errors","422","userStore","messages$","flatMap","list","from","first","arguments","validateSendMessage","currentUser","423","includes","MESSAGE_TYPES","trim","424","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_component","PlayerComponent","_ElementComponent","getPrototypeOf","$title","_$mount","find","text","$element","append","ElementComponent","component","attach","err","detach","425","ComponentBase","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","compSubscribe","_len","args","Array","_key","apply","_onDetachHandlers","$mount","children","_onAttach","_onDetach","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","handler","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","child","_ComponentBase","elementType","_$element","data","appendTo","remove","className","isOn","426","428","UsersComponent","$name","css","color","$userElement","429","431","_list","_form","ChatComponent","ChatListComponent","form","ChatFormComponent","432","434","serverStatusFactory","_ref","statusMessage","_moment2","format","userActionFactory","_ref2","chatMessageFactory","_ref3","time","_moment","filter","m","$newElement","scrollTop","scrollHeight","552","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","isArray","_$error","_$input","attr","keyCode","do","preventDefault","withLatestFrom","_sendMessage$","_login$","response","show","hide","sendMessage$","val","_this4","finally","focus","553","_toolbar","_contextMenu","_chrome","PlaylistComponent","toolbar","PlaylistToolbarComponent","_$chrome","_$scrollArea","PlaylistListComponent","contextMenu","PlaylistContextMenuComponent","chrome","PlaylistChromeComponent","554","556","_sort","PlayListSortComponent","557","558","559","560"],"mappings":"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","file":"application.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n\n/***/ 1:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(348);\n\t\n\tvar _services = __webpack_require__(363);\n\t\n\tvar services = _interopRequireWildcard(_services);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// Playgroud\n\tservices.server.emitAction$(\"login\", { username: \"foo\", password: \"bar\" }).subscribe(function (result) {\n\t    if (result.error) {\n\t        console.log(result.error);\n\t    } else {\n\t        console.log(\"Logged In: \" + result);\n\t    }\n\t});\n\t// Auth\n\tvar $html = (0, _jquery2.default)(\"html\");\n\tservices.usersStore.currentUser$.subscribe(function (user) {\n\t    if (user.isLoggedIn) {\n\t        $html.removeClass(\"not-logged-in\");\n\t        $html.addClass(\"logged-in\");\n\t    } else {\n\t        $html.addClass(\"not-logged-in\");\n\t        $html.removeClass(\"logged-in\");\n\t    }\n\t});\n\t\n\t// Components\n\t__webpack_require__(424);\n\t__webpack_require__(428);\n\t__webpack_require__(431);\n\t__webpack_require__(553);\n\t\n\t// Bootstrap\n\tservices.socket.connect();\n\n/***/ },\n\n/***/ 3:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\t_rxjs.Observable.prototype.safeSubscribe = function (next, error, complete) {\n\t    var subscription = this.subscribe(function (item) {\n\t        try {\n\t            next(item);\n\t        } catch (e) {\n\t            console.error(e.stack || e);\n\t            subscription.unsubscribe();\n\t        }\n\t    }, error, complete);\n\t    return subscription;\n\t};\n\t\n\t_rxjs.Observable.prototype.catchWrap = function () {\n\t    return this.catch(function (error) {\n\t        return _rxjs.Observable.of({ error: error });\n\t    });\n\t};\n\n/***/ },\n\n/***/ 348:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 363:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.chatStore = exports.usersStore = exports.server = exports.socket = undefined;\n\t\n\tvar _socket = __webpack_require__(364);\n\t\n\tvar _socket2 = _interopRequireDefault(_socket);\n\t\n\tvar _observableSocket = __webpack_require__(417);\n\t\n\tvar _users = __webpack_require__(418);\n\t\n\tvar _chat = __webpack_require__(422);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar socket = exports.socket = (0, _socket2.default)({ autoConnect: false });\n\tvar server = exports.server = new _observableSocket.ObservableSocket(socket);\n\tvar usersStore = exports.usersStore = new _users.UserStore(server);\n\tvar chatStore = exports.chatStore = new _chat.ChatStore(server, usersStore);\n\n/***/ },\n\n/***/ 417:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.ObservableSocket = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.clientMessage = clientMessage;\n\texports.fail = fail;\n\texports.success = success;\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction clientMessage(message) {\n\t    var error = new Error(message);\n\t    error.clientMessage = message;\n\t    return error;\n\t}\n\t\n\tfunction fail(message) {\n\t    return _rxjs.Observable.throw({ clientMessage: message });\n\t}\n\t\n\tvar successObservable = _rxjs.Observable.empty();\n\tfunction success() {\n\t    return successObservable;\n\t}\n\t\n\tvar ObservableSocket = exports.ObservableSocket = function () {\n\t    _createClass(ObservableSocket, [{\n\t        key: \"isConnected\",\n\t        get: function get() {\n\t            return this._state.isConnected;\n\t        }\n\t    }, {\n\t        key: \"isReconnecting\",\n\t        get: function get() {\n\t            return this._state.isReconnecting;\n\t        }\n\t    }, {\n\t        key: \"isTotallyDead\",\n\t        get: function get() {\n\t            return !this.isConnected && !this.isReconnecting;\n\t        }\n\t    }]);\n\t\n\t    function ObservableSocket(socket) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, ObservableSocket);\n\t\n\t        this._socket = socket;\n\t        this._state = {};\n\t        this._actionCallbacks = {};\n\t        this._requests = {};\n\t        this._nextRequestId = 0;\n\t\n\t        this.status$ = _rxjs.Observable.merge(this.on$(\"connect\").map(function () {\n\t            return { isConnected: true };\n\t        }), this.on$(\"disconnect\").map(function () {\n\t            return { isConnected: false };\n\t        }), this.on$(\"reconnecting\").map(function (attempt) {\n\t            return { isConnected: false, isReconnecting: true, attempt: attempt };\n\t        }), this.on$(\"reconnect_failed\").map(function () {\n\t            return { isTotallyDead: true };\n\t        })).publishReplay(1).refCount();\n\t\n\t        this.status$.subscribe(function (state) {\n\t            return _this._state = state;\n\t        });\n\t    }\n\t    // Basic Wrappers\n\t\n\t\n\t    _createClass(ObservableSocket, [{\n\t        key: \"on$\",\n\t        value: function on$(event) {\n\t            return _rxjs.Observable.fromEvent(this._socket, event);\n\t        }\n\t    }, {\n\t        key: \"on\",\n\t        value: function on(event, callback) {\n\t            this._socket.on(event, callback);\n\t        }\n\t    }, {\n\t        key: \"off\",\n\t        value: function off(event, callback) {\n\t            this._socket.off(event, callback);\n\t        }\n\t    }, {\n\t        key: \"emit\",\n\t        value: function emit(event, arg) {\n\t            this._socket.emit(event, arg);\n\t        }\n\t    }, {\n\t        key: \"emitAction$\",\n\t        value: function emitAction$(action, arg) {\n\t            var id = this._nextRequestId++;\n\t            this._registerCallbacks(action);\n\t\n\t            var subject = this._requests[id] = new _rxjs.ReplaySubject(1);\n\t            this._socket.emit(action, arg, id);\n\t            return subject;\n\t        }\n\t    }, {\n\t        key: \"_registerCallbacks\",\n\t        value: function _registerCallbacks(action) {\n\t            var _this2 = this;\n\t\n\t            if (this._actionCallbacks.hasOwnProperty(action)) {\n\t                return;\n\t            }\n\t\n\t            this._socket.on(action, function (arg, id) {\n\t                var request = _this2._popRequest(id);\n\t                if (!request) {\n\t                    return;\n\t                }\n\t                request.next(arg);\n\t                request.complete();\n\t            });\n\t\n\t            this._socket.on(action + \":fail\", function (arg, id) {\n\t                var request = _this2._popRequest(id);\n\t                if (!request) {\n\t                    return;\n\t                }\n\t                request.error(arg);\n\t            });\n\t\n\t            this._actionCallbacks[action] = true;\n\t        }\n\t    }, {\n\t        key: \"_popRequest\",\n\t        value: function _popRequest(id) {\n\t            if (!this._requests.hasOwnProperty(id)) {\n\t                console.error(\"No such ID exists in _requests - \" + id);\n\t                return;\n\t            }\n\t            var request = this._requests[id];\n\t            delete this._requests[id];\n\t            return request;\n\t        }\n\t    }, {\n\t        key: \"onAction\",\n\t        value: function onAction(action, callback) {\n\t            var _this3 = this;\n\t\n\t            this._socket.on(action, function (arg, requestId) {\n\t                try {\n\t                    var value = callback(arg);\n\t                    if (!value) {\n\t                        _this3._socket.emit(action, null, requestId);\n\t                        return;\n\t                    }\n\t\n\t                    if (typeof value.subscribe !== \"function\") {\n\t                        _this3._socket.emit(action, value, requestId);\n\t                        return;\n\t                    }\n\t\n\t                    var hasValue = false;\n\t                    value.subscribe({\n\t                        next: function next(item) {\n\t                            if (hasValue) {\n\t                                throw new Error(\"Action \" + action + \" produced more than one value.\");\n\t                            }\n\t                            _this3._socket.emit(action, item, requestId);\n\t                            hasValue = true;\n\t                        },\n\t                        error: function error(_error) {\n\t                            _this3._emitError(action, requestId, _error);\n\t                            console.error(_error.stack || _error);\n\t                        },\n\t                        complete: function complete() {\n\t                            if (!hasValue) {\n\t                                _this3._socket.emit(action, null, requestId);\n\t                            }\n\t                        }\n\t                    });\n\t                } catch (error) {\n\t                    if (typeof requestId !== \"undefined\") {\n\t                        _this3._emitError(action, requestId, error);\n\t                    }\n\t                    console.error(error.stack || error);\n\t                }\n\t            });\n\t        }\n\t    }, {\n\t        key: \"onActions\",\n\t        value: function onActions(actions) {\n\t            for (var action in actions) {\n\t                if (!actions.hasOwnProperty(action)) {\n\t                    continue;\n\t                }\n\t                this.onAction(action, actions[action]);\n\t            }\n\t        }\n\t    }, {\n\t        key: \"_emitError\",\n\t        value: function _emitError(action, id, error) {\n\t            var message = error && error.clientMessage || \"Fatal Error\";\n\t            this._socket.emit(action + \":fail\", { message: message }, id);\n\t        }\n\t    }]);\n\n\t    return ObservableSocket;\n\t}();\n\n/***/ },\n\n/***/ 418:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.UserStore = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(419);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _users = __webpack_require__(420);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar UserStore = exports.UserStore = function () {\n\t    _createClass(UserStore, [{\n\t        key: \"currentUser\",\n\t        get: function get() {\n\t            return this._currentUser;\n\t        }\n\t    }, {\n\t        key: \"isLoggedIn\",\n\t        get: function get() {\n\t            return this._currentUser && this._currentUser.isLoggedIn;\n\t        }\n\t    }]);\n\t\n\t    function UserStore(server) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, UserStore);\n\t\n\t        this._server = server;\n\t\n\t        var defaultStore = { users: [] };\n\t        var events$ = _rxjs.Observable.merge(this._server.on$(\"users:list\").map(opList), this._server.on$(\"users:added\").map(opAdd), this._server.on$(\"users:removed\").map(opRemove));\n\t\n\t        this.state$ = events$.scan(function (last, op) {\n\t            return op(last.state);\n\t        }, { state: defaultStore }).publishReplay(1);\n\t\n\t        this.state$.connect();\n\t\n\t        this.currentUser$ = _rxjs.Observable.merge(this._server.on$(\"auth:login\"), this._server.on$(\"auth:logout\").mapTo({})).startWith({}).publishReplay(1).refCount();\n\t\n\t        this.currentUser$.subscribe(function (user) {\n\t            return _this._currentUser = user;\n\t        });\n\t\n\t        this._server.on(\"connect\", function () {\n\t            _this._server.emit(\"users:list\");\n\t            if (!_this.isLoggedIn) {\n\t                return;\n\t            } else {\n\t                _this.login$(_this._currentUser.name).subscribe(), function (error) {\n\t                    return alert(console.log(\"Could not login: \" + error + \" || Unkown Error\"));\n\t                };\n\t            }\n\t        });\n\t    }\n\t\n\t    _createClass(UserStore, [{\n\t        key: \"login$\",\n\t        value: function login$(name) {\n\t            var validator = (0, _users.validateLogin)(name);\n\t            if (validator.hasErrors) {\n\t                return _rxjs.Observable.throw({ message: validator.message });\n\t            }\n\t            return this._server.emitAction$(\"auth:login\", { name: name });\n\t        }\n\t    }, {\n\t        key: \"logout$\",\n\t        value: function logout$() {\n\t            return this._server.emitAction$(\"auth:logout\");\n\t        }\n\t    }]);\n\t\n\t    return UserStore;\n\t}();\n\t\n\tfunction opList(users) {\n\t    return function (state) {\n\t        state.users = users;\n\t        state.users.sort(function (l, r) {\n\t            return l.name.localeCompare(r.name);\n\t        });\n\t        return {\n\t            type: \"list\",\n\t            state: state\n\t        };\n\t    };\n\t}\n\t\n\tfunction opAdd(user) {\n\t    return function (state) {\n\t        var insertIndex = _lodash2.default.findIndex(state.users, function (u) {\n\t            return u.name.localeCompare(user.name) > 0;\n\t        });\n\t        if (insertIndex === -1) {\n\t            insertIndex = state.users.length;\n\t\n\t            state.users.splice(insertIndex, 0, user);\n\t            return {\n\t                type: \"add\",\n\t                user: user,\n\t                state: state\n\t            };\n\t        }\n\t    };\n\t}\n\t\n\tfunction opRemove(user) {\n\t    return function (state) {\n\t        var index = _lodash2.default.findIndex(state.users, { name: user.name });\n\t        if (index !== -1) {\n\t            state.users.splice(index, 1);\n\t        }\n\t        return {\n\t            type: \"remove\",\n\t            user: user,\n\t            state: state\n\t        };\n\t    };\n\t}\n\n/***/ },\n\n/***/ 420:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.USERNAME_REGEX = undefined;\n\texports.validateLogin = validateLogin;\n\t\n\tvar _validator = __webpack_require__(421);\n\t\n\tvar USERNAME_REGEX = exports.USERNAME_REGEX = /^[\\w\\d_-]+$/;\n\t\n\tfunction validateLogin(username) {\n\t    var validator = new _validator.Validator();\n\t\n\t    if (username.length >= 20) {\n\t        validator.error(\"Username must be fewer than 20 characters\");\n\t    }\n\t    if (!USERNAME_REGEX.test(username)) {\n\t        validator.error(\"Username can only contain letters, numbers, underscores and dashes\");\n\t    }\n\t    return validator;\n\t}\n\n/***/ },\n\n/***/ 421:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Validator = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Validator = exports.Validator = function () {\n\t    _createClass(Validator, [{\n\t        key: \"isValid\",\n\t        get: function get() {\n\t            return !this._errors.length;\n\t        }\n\t    }, {\n\t        key: \"errors\",\n\t        get: function get() {\n\t            return this._errors;\n\t        }\n\t    }, {\n\t        key: \"message\",\n\t        get: function get() {\n\t            return this._errors.join(\", \");\n\t        }\n\t    }]);\n\t\n\t    function Validator() {\n\t        _classCallCheck(this, Validator);\n\t\n\t        this._errors = [];\n\t    }\n\t\n\t    _createClass(Validator, [{\n\t        key: \"error\",\n\t        value: function error(message) {\n\t            this._errors.push(message);\n\t        }\n\t    }, {\n\t        key: \"toObject\",\n\t        value: function toObject() {\n\t            if (this.isValid) {\n\t                return {};\n\t            }\n\t            return {\n\t                errors: this._errors,\n\t                message: this.message\n\t            };\n\t        }\n\t    }, {\n\t        key: \"throw$\",\n\t        value: function throw$() {\n\t            return _rxjs.Observable.throw({\n\t                clientMessage: this.message\n\t            });\n\t        }\n\t    }]);\n\n\t    return Validator;\n\t}();\n\n/***/ },\n\n/***/ 422:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.ChatStore = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _chat = __webpack_require__(423);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ChatStore = exports.ChatStore = function () {\n\t    function ChatStore(server, userStore) {\n\t        _classCallCheck(this, ChatStore);\n\t\n\t        this._server = server;\n\t        this._users = userStore;\n\t\n\t        this.messages$ = _rxjs.Observable.merge(server.on$(\"chat:list\").flatMap(function (list) {\n\t            return _rxjs.Observable.from(list);\n\t        }), server.on$(\"chat:added\")).publishReplay(100);\n\t\n\t        this.messages$.connect();\n\t\n\t        server.on$(\"connect\").first().subscribe(function () {\n\t            return server.emit(\"chat:list\");\n\t        });\n\t    }\n\t\n\t    _createClass(ChatStore, [{\n\t        key: \"sendMessage$\",\n\t        value: function sendMessage$(message) {\n\t            var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"normal\";\n\t\n\t            var validator = (0, _chat.validateSendMessage)(this._users.currentUser, message, type);\n\t            if (!validator.isValid) {\n\t                return _rxjs.Observable.throw({ message: validator.message });\n\t            }\n\t            return this._server.emitAction$(\"chat:add\", { message: message, type: type });\n\t        }\n\t    }]);\n\n\t    return ChatStore;\n\t}();\n\n/***/ },\n\n/***/ 423:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.MESSAGE_TYPES = undefined;\n\texports.validateSendMessage = validateSendMessage;\n\t\n\tvar _lodash = __webpack_require__(419);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _validator = __webpack_require__(421);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MESSAGE_TYPES = exports.MESSAGE_TYPES = [\"normal\"];\n\t\n\tfunction validateSendMessage(user, message, type) {\n\t    var validator = new _validator.Validator();\n\t\n\t    if (message.length > 50) {\n\t        validator.error(\"Message must be smaller 50 characters\");\n\t    }\n\t    if (!_lodash2.default.includes(MESSAGE_TYPES, type)) {\n\t        validator.error(\"Invalid message type: \" + type);\n\t    }\n\t    if (message.trim().length === 0) {\n\t        validator.error(\"Message cannot be blank\");\n\t    }\n\t\n\t    return validator;\n\t}\n\n/***/ },\n\n/***/ 424:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\t__webpack_require__(426);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlayerComponent = function (_ElementComponent) {\n\t    _inherits(PlayerComponent, _ElementComponent);\n\t\n\t    function PlayerComponent() {\n\t        _classCallCheck(this, PlayerComponent);\n\t\n\t        return _possibleConstructorReturn(this, (PlayerComponent.__proto__ || Object.getPrototypeOf(PlayerComponent)).call(this));\n\t    }\n\t\n\t    _createClass(PlayerComponent, [{\n\t        key: \"_onAttach\",\n\t        value: function _onAttach() {\n\t            var $title = this._$mount.find(\"h1\");\n\t            $title.text(\"Player\");\n\t\n\t            this.$element.append(\"<h1>Video Player Here</h1>\");\n\t        }\n\t    }]);\n\t\n\t    return PlayerComponent;\n\t}(_component.ElementComponent);\n\t\n\tvar component = void 0;\n\ttry {\n\t    component = new PlayerComponent();\n\t    component.attach((0, _jquery2.default)(\"section.player\"));\n\t} catch (err) {\n\t    console.error(err);\n\t    if (component) {\n\t        component.detach();\n\t    }\n\t} finally {\n\t    if (false) {\n\t        module.hot.accept();\n\t        module.hot.dispose(function () {\n\t            return component && component.detach();\n\t        });\n\t    }\n\t}\n\n/***/ },\n\n/***/ 425:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ElementComponent = exports.ComponentBase = undefined;\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_rxjs.Observable.prototype.compSubscribe = function (component) {\n\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\targs[_key - 1] = arguments[_key];\n\t\t}\n\t\n\t\tvar subscription = this.safeSubscribe.apply(this, args);\n\t\tcomponent._onDetachHandlers.push(function () {\n\t\t\treturn subscription.unsubscribe();\n\t\t});\n\t\treturn subscription;\n\t};\n\t\n\tvar ComponentBase = exports.ComponentBase = function () {\n\t\tfunction ComponentBase() {\n\t\t\t_classCallCheck(this, ComponentBase);\n\t\t}\n\t\n\t\t_createClass(ComponentBase, [{\n\t\t\tkey: \"attach\",\n\t\t\tvalue: function attach($mount) {\n\t\t\t\tthis._$mount = $mount;\n\t\t\t\tthis._onDetachHandlers = [];\n\t\t\t\tthis.children = [];\n\t\t\t\tthis._onAttach();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"detach\",\n\t\t\tvalue: function detach() {\n\t\t\t\tthis._onDetach();\n\t\n\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\tvar _didIteratorError = false;\n\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator = this._onDetachHandlers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tvar handler = _step.value;\n\t\n\t\t\t\t\t\thandler();\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator2 = this.children[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\tvar child = _step2.value;\n\t\n\t\t\t\t\t\tchild.detach();\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tthis._onDetachHandlers = [];\n\t\t\t\tthis.children = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {}\n\t\t}, {\n\t\t\tkey: \"_onDetach\",\n\t\t\tvalue: function _onDetach() {}\n\t\t}]);\n\t\n\t\treturn ComponentBase;\n\t}();\n\t\n\tvar ElementComponent = exports.ElementComponent = function (_ComponentBase) {\n\t\t_inherits(ElementComponent, _ComponentBase);\n\t\n\t\t_createClass(ElementComponent, [{\n\t\t\tkey: \"$element\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._$element;\n\t\t\t}\n\t\t}]);\n\t\n\t\tfunction ElementComponent() {\n\t\t\tvar elementType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"div\";\n\t\n\t\t\t_classCallCheck(this, ElementComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ElementComponent.__proto__ || Object.getPrototypeOf(ElementComponent)).call(this));\n\t\n\t\t\t_this._$element = (0, _jquery2.default)(\"<\" + elementType + \">\").data(\"component\", _this);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ElementComponent, [{\n\t\t\tkey: \"attach\",\n\t\t\tvalue: function attach($mount) {\n\t\t\t\t_get(ElementComponent.prototype.__proto__ || Object.getPrototypeOf(ElementComponent.prototype), \"attach\", this).call(this, $mount);\n\t\t\t\tthis.$element.appendTo(this._$mount);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"detach\",\n\t\t\tvalue: function detach() {\n\t\t\t\t_get(ElementComponent.prototype.__proto__ || Object.getPrototypeOf(ElementComponent.prototype), \"detach\", this).call(this);\n\t\t\t\tthis.$element.remove();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_setClass\",\n\t\t\tvalue: function _setClass(className, isOn) {\n\t\t\t\tif (isOn) this._$element.addClass(className);else this._$element.removeClass(className);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ElementComponent;\n\t}(ComponentBase);\n\n/***/ },\n\n/***/ 426:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 428:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\t__webpack_require__(429);\n\t\n\tvar _services = __webpack_require__(363);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar UsersComponent = function (_ElementComponent) {\n\t    _inherits(UsersComponent, _ElementComponent);\n\t\n\t    function UsersComponent(usersStore) {\n\t        _classCallCheck(this, UsersComponent);\n\t\n\t        var _this = _possibleConstructorReturn(this, (UsersComponent.__proto__ || Object.getPrototypeOf(UsersComponent)).call(this, \"ul\"));\n\t\n\t        _this.$element.addClass(\"users\");\n\t        _this._users = usersStore;\n\t        return _this;\n\t    }\n\t\n\t    _createClass(UsersComponent, [{\n\t        key: \"_onAttach\",\n\t        value: function _onAttach() {\n\t            var _this2 = this;\n\t\n\t            var $title = this._$mount.find(\"> h1\");\n\t\n\t            this._users.state$.map(function (action) {\n\t                return action.state.users;\n\t            }).compSubscribe(this, function (users) {\n\t                $title.text(users.length + \" user\" + (users.length != 1 ? \"s\" : \"\"));\n\t\n\t                _this2.$element.empty();\n\t                var _iteratorNormalCompletion = true;\n\t                var _didIteratorError = false;\n\t                var _iteratorError = undefined;\n\t\n\t                try {\n\t                    for (var _iterator = users[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                        var user = _step.value;\n\t\n\t                        var $name = (0, _jquery2.default)(\"<span class=\\\"name\\\" />\").text(user.name).css(\"color\", user.color);\n\t                        var $userElement = (0, _jquery2.default)(\"<li />\").append($name);\n\t                        _this2.$element.append($userElement);\n\t                    }\n\t                } catch (err) {\n\t                    _didIteratorError = true;\n\t                    _iteratorError = err;\n\t                } finally {\n\t                    try {\n\t                        if (!_iteratorNormalCompletion && _iterator.return) {\n\t                            _iterator.return();\n\t                        }\n\t                    } finally {\n\t                        if (_didIteratorError) {\n\t                            throw _iteratorError;\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return UsersComponent;\n\t}(_component.ElementComponent);\n\t\n\tvar component = void 0;\n\ttry {\n\t    component = new UsersComponent(_services.usersStore);\n\t    component.attach((0, _jquery2.default)(\"section.users\"));\n\t} catch (err) {\n\t    console.error(err);\n\t    if (component) {\n\t        component.detach();\n\t    }\n\t} finally {\n\t    if (false) {\n\t        module.hot.accept();\n\t        module.hot.dispose(function () {\n\t            return component && component.detach();\n\t        });\n\t    }\n\t}\n\n/***/ },\n\n/***/ 429:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 431:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\t__webpack_require__(432);\n\t\n\tvar _services = __webpack_require__(363);\n\t\n\tvar _list = __webpack_require__(434);\n\t\n\tvar _form = __webpack_require__(552);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ChatComponent = function (_ComponentBase) {\n\t    _inherits(ChatComponent, _ComponentBase);\n\t\n\t    function ChatComponent(server, usersStore, chatStore) {\n\t        _classCallCheck(this, ChatComponent);\n\t\n\t        var _this = _possibleConstructorReturn(this, (ChatComponent.__proto__ || Object.getPrototypeOf(ChatComponent)).call(this));\n\t\n\t        _this._server = server;\n\t        _this._users = usersStore;\n\t        _this._chat = chatStore;\n\t        return _this;\n\t    }\n\t\n\t    _createClass(ChatComponent, [{\n\t        key: \"_onAttach\",\n\t        value: function _onAttach() {\n\t            var $title = this._$mount.find(\"> h1\");\n\t            $title.text(\"Chat\");\n\t\n\t            var list = new _list.ChatListComponent(this._server, this._users, this._chat);\n\t            list.attach(this._$mount);\n\t            this.children.push(list);\n\t\n\t            var form = new _form.ChatFormComponent(this._users, this._chat);\n\t            form.attach(this._$mount);\n\t            this.children.push(form);\n\t        }\n\t    }]);\n\t\n\t    return ChatComponent;\n\t}(_component.ComponentBase);\n\t\n\tvar component = void 0;\n\ttry {\n\t    component = new ChatComponent(_services.server, _services.usersStore, _services.chatStore);\n\t    component.attach((0, _jquery2.default)(\"section.chat\"));\n\t} catch (err) {\n\t    console.error(err);\n\t    if (component) {\n\t        component.detach();\n\t    }\n\t} finally {\n\t    if (false) {\n\t        module.hot.accept();\n\t        module.hot.dispose(function () {\n\t            return component && component.detach();\n\t        });\n\t    }\n\t}\n\n/***/ },\n\n/***/ 432:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 434:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ChatListComponent = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _moment = __webpack_require__(435);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ChatListComponent = exports.ChatListComponent = function (_ElementComponent) {\n\t\t_inherits(ChatListComponent, _ElementComponent);\n\t\n\t\tfunction ChatListComponent(server, usersStore, chatStore) {\n\t\t\t_classCallCheck(this, ChatListComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ChatListComponent.__proto__ || Object.getPrototypeOf(ChatListComponent)).call(this, \"ul\"));\n\t\n\t\t\t_this._server = server;\n\t\t\t_this._users = usersStore;\n\t\t\t_this._chat = chatStore;\n\t\t\t_this.$element.addClass(\"chat-messages\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ChatListComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\t_rxjs.Observable.merge(this._chat.messages$.map(chatMessageFactory), this._users.state$.map(userActionFactory), this._server.status$.map(serverStatusFactory)).filter(function (m) {\n\t\t\t\t\treturn m;\n\t\t\t\t}).compSubscribe(this, function ($newElement) {\n\t\t\t\t\t_this2.$element.append($newElement);\n\t\t\t\t\t_this2.$element[0].scrollTop = _this2.$element[0].scrollHeight;\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ChatListComponent;\n\t}(_component.ElementComponent);\n\t\n\tfunction serverStatusFactory(_ref) {\n\t\tvar isConnected = _ref.isConnected,\n\t\t    isReconnecting = _ref.isReconnecting,\n\t\t    attempt = _ref.attempt;\n\t\n\t\tvar statusMessage = null;\n\t\tif (isConnected) statusMessage = \"connected\";else if (isReconnecting) statusMessage = \"reconnecting (attempt \" + attempt + \")\";else statusMessage = \"gg. it's over now\";\n\t\n\t\tif (statusMessage == null) return null;\n\t\n\t\treturn (0, _jquery2.default)(\"<li class=\\\"server-status\\\" />\").append([(0, _jquery2.default)(\"<span class=\\\"author\\\" />\").text(\"system\"), (0, _jquery2.default)(\"<span class=\\\"message\\\" />\").text(statusMessage), (0, _jquery2.default)(\"<time />\").text((0, _moment2.default)().format(\"h:mm:ss a\"))]);\n\t}\n\t\n\tfunction userActionFactory(_ref2) {\n\t\tvar type = _ref2.type,\n\t\t    user = _ref2.user;\n\t\n\t\tif (type !== \"add\" && type !== \"remove\") return null;\n\t\n\t\treturn (0, _jquery2.default)(\"<li class=\\\"user-action \" + type + \"\\\" />\").append([(0, _jquery2.default)(\"<span class=\\\"author\\\" />\").text(user.name).css(\"color\", user.color), (0, _jquery2.default)(\"<span class=\\\"message\\\" />\").text(type === \"add\" ? \"joined\" : \"left\"), (0, _jquery2.default)(\"<time />\").text((0, _moment2.default)().format(\"h:mm:ss a\"))]);\n\t}\n\t\n\tfunction chatMessageFactory(_ref3) {\n\t\tvar user = _ref3.user,\n\t\t    message = _ref3.message,\n\t\t    type = _ref3.type,\n\t\t    time = _ref3.time;\n\t\n\t\treturn (0, _jquery2.default)(\"<li class=\\\"message \" + type + \"\\\" />\").data(\"user\", user.name).append([(0, _jquery2.default)(\"<span class=\\\"author\\\" />\").text(user.name).css(\"color\", user.color), (0, _jquery2.default)(\"<span class=\\\"message\\\" />\").text(message), (0, _jquery2.default)(\"<time />\").text((0, _moment2.default)(time).format(\"h:mm:ss a\"))]);\n\t}\n\n/***/ },\n\n/***/ 552:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ChatFormComponent = undefined;\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _rxjs = __webpack_require__(4);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ChatFormComponent = exports.ChatFormComponent = function (_ElementComponent) {\n\t\t_inherits(ChatFormComponent, _ElementComponent);\n\t\n\t\tfunction ChatFormComponent(usersStore, chatStore) {\n\t\t\t_classCallCheck(this, ChatFormComponent);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (ChatFormComponent.__proto__ || Object.getPrototypeOf(ChatFormComponent)).call(this, \"div\"));\n\t\n\t\t\t_this._users = usersStore;\n\t\t\t_this._chat = chatStore;\n\t\t\t_this.$element.addClass(\"chat-form\");\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(ChatFormComponent, [{\n\t\t\tkey: \"_onAttach\",\n\t\t\tvalue: function _onAttach() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis._$error = (0, _jquery2.default)(\"<div class=\\\"chat-error\\\" />\").appendTo(this.$element);\n\t\t\t\tthis._$input = (0, _jquery2.default)(\"<input type=\\\"text\\\" class=\\\"chat-input\\\" />\").appendTo(this.$element);\n\t\n\t\t\t\tthis._users.currentUser$.compSubscribe(this, function (user) {\n\t\t\t\t\t_this2._$input.attr(\"placeholder\", user.isLoggedIn ? \"\" : \"Enter a username\");\n\t\t\t\t});\n\t\n\t\t\t\t_rxjs.Observable.fromEvent(this._$input, \"keydown\").filter(function (e) {\n\t\t\t\t\treturn e.keyCode === 13;\n\t\t\t\t} /* keycode for enter */).do(function (e) {\n\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t}).map(function (e) {\n\t\t\t\t\treturn e.target.value.trim();\n\t\t\t\t}).filter(function (e) {\n\t\t\t\t\treturn e.length;\n\t\t\t\t}).withLatestFrom(this._users.currentUser$).flatMap(function (_ref) {\n\t\t\t\t\tvar _ref2 = _slicedToArray(_ref, 2),\n\t\t\t\t\t    value = _ref2[0],\n\t\t\t\t\t    user = _ref2[1];\n\t\n\t\t\t\t\treturn user.isLoggedIn ? _this2._sendMessage$(value) : _this2._login$(value);\n\t\t\t\t}).compSubscribe(this, function (response) {\n\t\t\t\t\tif (response && response.error) _this2._$error.show().text(response.error.message);else _this2._$error.hide();\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_sendMessage$\",\n\t\t\tvalue: function _sendMessage$(message) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\treturn this._chat.sendMessage$(message).catchWrap().do(function () {\n\t\t\t\t\treturn _this3._$input.val(\"\");\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_login$\",\n\t\t\tvalue: function _login$(username) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tthis._$input.attr(\"disabled\", \"disabled\");\n\t\t\t\treturn this._users.login$(username).catchWrap().do(function () {\n\t\t\t\t\treturn _this4._$input.val(\"\");\n\t\t\t\t}).finally(function () {\n\t\t\t\t\t_this4._$input.attr(\"disabled\", null);\n\t\t\t\t\t_this4._$input.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\n\t\treturn ChatFormComponent;\n\t}(_component.ElementComponent);\n\n/***/ },\n\n/***/ 553:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\t__webpack_require__(554);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tvar _list = __webpack_require__(556);\n\t\n\tvar _toolbar = __webpack_require__(558);\n\t\n\tvar _contextMenu = __webpack_require__(559);\n\t\n\tvar _chrome = __webpack_require__(560);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistComponent = function (_ComponentBase) {\n\t    _inherits(PlaylistComponent, _ComponentBase);\n\t\n\t    function PlaylistComponent() {\n\t        _classCallCheck(this, PlaylistComponent);\n\t\n\t        return _possibleConstructorReturn(this, (PlaylistComponent.__proto__ || Object.getPrototypeOf(PlaylistComponent)).call(this));\n\t    }\n\t\n\t    _createClass(PlaylistComponent, [{\n\t        key: \"_onAttach\",\n\t        value: function _onAttach() {\n\t            var $title = this._$mount.find(\"> h1\");\n\t            $title.text(\"Playlist\");\n\t\n\t            var toolbar = new _toolbar.PlaylistToolbarComponent();\n\t            toolbar.attach(this._$mount);\n\t            this._$chrome = (0, _jquery2.default)(\"<div class=\\\"chrome\\\" />\").appendTo(this._$mount);\n\t            this._$scrollArea = (0, _jquery2.default)(\"<div class=\\\"scroll-area\\\" />\").appendTo(this._$chrome);\n\t\n\t            var list = new _list.PlaylistListComponent();\n\t            list.attach(this._$scrollArea);\n\t\n\t            var contextMenu = new _contextMenu.PlaylistContextMenuComponent();\n\t            contextMenu.attach(this._$scrollArea);\n\t\n\t            var chrome = new _chrome.PlaylistChromeComponent();\n\t            chrome.attach(this._$chrome);\n\t\n\t            this.children.push(toolbar, list, contextMenu, chrome);\n\t        }\n\t    }, {\n\t        key: \"_onDetach\",\n\t        value: function _onDetach() {\n\t            this._$chrome.remove();\n\t        }\n\t    }]);\n\t\n\t    return PlaylistComponent;\n\t}(_component.ComponentBase);\n\t\n\tvar component = void 0;\n\ttry {\n\t    component = new PlaylistComponent();\n\t    component.attach((0, _jquery2.default)(\"section.playlist\"));\n\t} catch (err) {\n\t    console.error(err);\n\t    if (component) {\n\t        component.detach();\n\t    }\n\t} finally {\n\t    if (false) {\n\t        module.hot.accept();\n\t        module.hot.dispose(function () {\n\t            return component && component.detach();\n\t        });\n\t    }\n\t}\n\n/***/ },\n\n/***/ 554:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 556:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.PlaylistListComponent = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tvar _sort = __webpack_require__(557);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistListComponent = exports.PlaylistListComponent = function (_ElementComponent) {\n\t    _inherits(PlaylistListComponent, _ElementComponent);\n\t\n\t    function PlaylistListComponent() {\n\t        _classCallCheck(this, PlaylistListComponent);\n\t\n\t        var _this = _possibleConstructorReturn(this, (PlaylistListComponent.__proto__ || Object.getPrototypeOf(PlaylistListComponent)).call(this, \"ul\"));\n\t\n\t        _this.$element.addClass(\"playlist-list\");\n\t        return _this;\n\t    }\n\t\n\t    _createClass(PlaylistListComponent, [{\n\t        key: \"_onAttach\",\n\t        value: function _onAttach() {\n\t            var sort = new _sort.PlayListSortComponent();\n\t            sort.attach(this._$mount);\n\t            this.children.push(sort);\n\t        }\n\t    }]);\n\n\t    return PlaylistListComponent;\n\t}(_component.ElementComponent);\n\n/***/ },\n\n/***/ 557:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.PlayListSortComponent = undefined;\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlayListSortComponent = exports.PlayListSortComponent = function (_ComponentBase) {\n\t    _inherits(PlayListSortComponent, _ComponentBase);\n\t\n\t    function PlayListSortComponent() {\n\t        _classCallCheck(this, PlayListSortComponent);\n\t\n\t        return _possibleConstructorReturn(this, (PlayListSortComponent.__proto__ || Object.getPrototypeOf(PlayListSortComponent)).call(this));\n\t    }\n\t\n\t    return PlayListSortComponent;\n\t}(_component.ComponentBase);\n\n/***/ },\n\n/***/ 558:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.PlaylistToolbarComponent = undefined;\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistToolbarComponent = exports.PlaylistToolbarComponent = function (_ElementComponent) {\n\t    _inherits(PlaylistToolbarComponent, _ElementComponent);\n\t\n\t    function PlaylistToolbarComponent() {\n\t        _classCallCheck(this, PlaylistToolbarComponent);\n\t\n\t        var _this = _possibleConstructorReturn(this, (PlaylistToolbarComponent.__proto__ || Object.getPrototypeOf(PlaylistToolbarComponent)).call(this, \"div\"));\n\t\n\t        _this.$element.addClass(\"toolbar\");\n\t        return _this;\n\t    }\n\t\n\t    return PlaylistToolbarComponent;\n\t}(_component.ElementComponent);\n\n/***/ },\n\n/***/ 559:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.PlaylistContextMenuComponent = undefined;\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistContextMenuComponent = exports.PlaylistContextMenuComponent = function (_ElementComponent) {\n\t    _inherits(PlaylistContextMenuComponent, _ElementComponent);\n\t\n\t    function PlaylistContextMenuComponent() {\n\t        _classCallCheck(this, PlaylistContextMenuComponent);\n\t\n\t        var _this = _possibleConstructorReturn(this, (PlaylistContextMenuComponent.__proto__ || Object.getPrototypeOf(PlaylistContextMenuComponent)).call(this, \"div\"));\n\t\n\t        _this.$element.addClass(\"context-menu\");\n\t        return _this;\n\t    }\n\t\n\t    return PlaylistContextMenuComponent;\n\t}(_component.ElementComponent);\n\n/***/ },\n\n/***/ 560:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.PlaylistChromeComponent = undefined;\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _component = __webpack_require__(425);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PlaylistChromeComponent = exports.PlaylistChromeComponent = function (_ComponentBase) {\n\t    _inherits(PlaylistChromeComponent, _ComponentBase);\n\t\n\t    function PlaylistChromeComponent() {\n\t        _classCallCheck(this, PlaylistChromeComponent);\n\t\n\t        return _possibleConstructorReturn(this, (PlaylistChromeComponent.__proto__ || Object.getPrototypeOf(PlaylistChromeComponent)).call(this));\n\t    }\n\t\n\t    return PlaylistChromeComponent;\n\t}(_component.ComponentBase);\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// application.js","import $ from \"jquery\";\r\nimport \"shared/operators\";\r\nimport \"./application.scss\";\r\nimport * as services from \"./services\";\r\n\r\n\r\n// Playgroud\r\nservices.server.emitAction$(\"login\", { username: \"foo\", password: \"bar\" })\r\n    .subscribe(result => {\r\n        if (result.error) {\r\n            console.log(result.error);\r\n        }\r\n        else {\r\n            console.log(\"Logged In: \" + result);\r\n        }\r\n    });\r\n// Auth\r\nconst $html = $(\"html\");\r\nservices.usersStore.currentUser$.subscribe(user => {\r\n    if (user.isLoggedIn) {\r\n        $html.removeClass(\"not-logged-in\");\r\n        $html.addClass(\"logged-in\");\r\n    }\r\n    else {\r\n        $html.addClass(\"not-logged-in\");\r\n        $html.removeClass(\"logged-in\");\r\n\r\n    }\r\n});\r\n\r\n// Components\r\nrequire(\"./components/player/player.js\");\r\nrequire(\"./components/users/users.js\");\r\nrequire(\"./components/chat/chat.js\");\r\nrequire(\"./components/playlist/playlist.js\");\r\n\r\n// Bootstrap\r\nservices.socket.connect();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application.js","import {Observable} from \"rxjs\";\r\n\r\nObservable.prototype.safeSubscribe = function(next, error, complete) {\r\n    const subscription = this.subscribe(\r\n        item => {\r\n            try {\r\n                next(item);\r\n            } catch (e) {\r\n                console.error(e.stack || e);\r\n                subscription.unsubscribe();\r\n            }\r\n        },\r\n        error,\r\n        complete);\r\n    return subscription;\r\n};\r\n\r\nObservable.prototype.catchWrap = function() {\r\n    return this.catch(error => Observable.of({error: error}));\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/shared/operators.js","import io from \"socket.io-client\";\r\nimport { ObservableSocket } from \"shared/observable-socket.js\";\r\nimport { UserStore } from \"./stores/users\";\r\nimport { ChatStore} from \"./stores/chat\";\r\n\r\nexport const socket = io({ autoConnect: false });\r\nexport const server = new ObservableSocket(socket);\r\nexport const usersStore = new UserStore(server);\r\nexport const chatStore = new ChatStore(server, usersStore); \n\n\n// WEBPACK FOOTER //\n// ./src/client/services.js","import { Observable, ReplaySubject } from \"rxjs\";\r\n\r\nexport function clientMessage(message) {\r\n    const error = new Error(message);\r\n    error.clientMessage = message;\r\n    return error;\r\n}\r\n\r\nexport function fail(message) {\r\n    return Observable.throw({clientMessage: message});\r\n}\r\n\r\nlet successObservable = Observable.empty();\r\nexport function success() {\r\n    return successObservable;\r\n}\r\n\r\nexport class ObservableSocket {\r\n\r\n    get isConnected() { return this._state.isConnected; }\r\n    get isReconnecting() { return this._state.isReconnecting; }\r\n    get isTotallyDead() { return !this.isConnected && !this.isReconnecting; }\r\n\r\n    constructor(socket) {\r\n        this._socket = socket;\r\n        this._state = {};\r\n        this._actionCallbacks = {};\r\n        this._requests = {};\r\n        this._nextRequestId = 0;\r\n\r\n        this.status$ = Observable.merge(\r\n            this.on$(\"connect\").map(() => ({ isConnected: true })),\r\n            this.on$(\"disconnect\").map(() => ({ isConnected: false })),\r\n            this.on$(\"reconnecting\").map(attempt => ({ isConnected: false, isReconnecting: true, attempt })),\r\n            this.on$(\"reconnect_failed\").map(() => ({ isTotallyDead: true })))\r\n            .publishReplay(1)\r\n            .refCount();\r\n\r\n        this.status$.subscribe(state => this._state = state);\r\n    }\r\n    // Basic Wrappers\r\n    on$(event) {\r\n        return Observable.fromEvent(this._socket, event);\r\n    }\r\n    on(event, callback) {\r\n        this._socket.on(event, callback);\r\n    }\r\n    off(event, callback) {\r\n        this._socket.off(event, callback);\r\n    }\r\n    emit(event, arg) {\r\n        this._socket.emit(event, arg);\r\n    }\r\n\r\n    emitAction$(action, arg) {\r\n        const id = this._nextRequestId++;\r\n        this._registerCallbacks(action);\r\n\r\n        const subject = this._requests[id] = new ReplaySubject(1);\r\n        this._socket.emit(action, arg, id);\r\n        return subject;\r\n\r\n    }\r\n    _registerCallbacks(action) {\r\n        if (this._actionCallbacks.hasOwnProperty(action)) {\r\n            return;\r\n        }\r\n\r\n        this._socket.on(action, (arg, id) => {\r\n            const request = this._popRequest(id);\r\n            if (!request) {\r\n                return;\r\n            }\r\n            request.next(arg);\r\n            request.complete();\r\n        });\r\n\r\n        this._socket.on(`${action}:fail`, (arg, id) => {\r\n            const request = this._popRequest(id);\r\n            if (!request) {\r\n                return;\r\n            }\r\n            request.error(arg);\r\n        });\r\n\r\n        this._actionCallbacks[action] = true;\r\n    }\r\n    _popRequest(id) {\r\n        if (!this._requests.hasOwnProperty(id)) {\r\n            console.error(`No such ID exists in _requests - ${id}`);\r\n            return;\r\n        }\r\n        const request = this._requests[id];\r\n        delete this._requests[id];\r\n        return request;\r\n    }\r\n\r\n\r\n    onAction(action, callback) {\r\n        this._socket.on(action, (arg, requestId) => {\r\n            try {\r\n                const value = callback(arg);\r\n                if (!value) {\r\n                    this._socket.emit(action, null, requestId);\r\n                    return;\r\n                }\r\n\r\n                if (typeof (value.subscribe) !== \"function\") {\r\n                    this._socket.emit(action, value, requestId);\r\n                    return;\r\n                }\r\n\r\n                let hasValue = false;\r\n                value.subscribe({\r\n                    next: (item) => {\r\n                        if (hasValue) {\r\n                            throw new Error(`Action ${action} produced more than one value.`);\r\n                        }\r\n                        this._socket.emit(action, item, requestId);\r\n                        hasValue = true;\r\n                    },\r\n                    error: (error) => {\r\n                        this._emitError(action, requestId, error);\r\n                        console.error(error.stack || error);\r\n                    },\r\n                    complete: () => {\r\n                        if (!hasValue) {\r\n                            this._socket.emit(action, null, requestId);\r\n                        }\r\n                    }\r\n                });\r\n\r\n            } catch (error) {\r\n                if (typeof (requestId) !== \"undefined\") {\r\n                    this._emitError(action, requestId, error);\r\n                }\r\n                console.error(error.stack || error);\r\n            }\r\n        });\r\n    }\r\n\r\n    onActions(actions) {\r\n        for (let action in actions) {\r\n            if (!actions.hasOwnProperty(action)) {\r\n                continue;\r\n            }\r\n            this.onAction(action, actions[action]);\r\n        }\r\n    }\r\n\r\n    _emitError(action, id, error) {\r\n        const message = (error && error.clientMessage) || \"Fatal Error\";\r\n        this._socket.emit(`${action}:fail`, { message }, id);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/observable-socket.js","import _ from \"lodash\";\r\nimport { Observable } from \"rxjs\";\r\nimport { validateLogin } from \"shared/validation/users\";\r\n\r\nexport class UserStore {\r\n    get currentUser() { return this._currentUser; }\r\n    get isLoggedIn() { return this._currentUser && this._currentUser.isLoggedIn; }\r\n\r\n    constructor(server) {\r\n        this._server = server;\r\n\r\n        const defaultStore = { users: [] };\r\n        const events$ = Observable.merge(\r\n            this._server.on$(\"users:list\").map(opList),\r\n            this._server.on$(\"users:added\").map(opAdd),\r\n            this._server.on$(\"users:removed\").map(opRemove));\r\n\r\n        this.state$ = events$\r\n            .scan(function (last, op) {\r\n                return op(last.state);\r\n            }, { state: defaultStore })\r\n            .publishReplay(1);\r\n\r\n        this.state$.connect();\r\n\r\n        this.currentUser$ = Observable.merge(\r\n            this._server.on$(\"auth:login\"),\r\n            this._server.on$(\"auth:logout\").mapTo({}))\r\n            .startWith({})\r\n            .publishReplay(1)\r\n            .refCount();\r\n\r\n        this.currentUser$.subscribe(user => this._currentUser = user);\r\n\r\n\r\n        this._server.on(\"connect\", () => {\r\n            this._server.emit(\"users:list\");\r\n            if (!this.isLoggedIn) {\r\n                return;\r\n            }\r\n            else{\r\n                this.login$(this._currentUser.name).subscribe(), error => alert(console.log(`Could not login: ${error} || Unkown Error`));\r\n            }\r\n        });\r\n    }\r\n    login$(name) {\r\n        const validator = validateLogin(name);\r\n        if (validator.hasErrors) {\r\n            return Observable.throw({ message: validator.message });\r\n        }\r\n        return this._server.emitAction$(\"auth:login\", { name });\r\n    }\r\n\r\n    logout$() {\r\n        return this._server.emitAction$(\"auth:logout\");\r\n    }\r\n}\r\n\r\nfunction opList(users) {\r\n    return state => {\r\n        state.users = users;\r\n        state.users.sort((l, r) => l.name.localeCompare(r.name));\r\n        return {\r\n            type: \"list\",\r\n            state: state\r\n        };\r\n    };\r\n}\r\n\r\nfunction opAdd(user) {\r\n    return state => {\r\n        let insertIndex = _.findIndex(state.users,\r\n            u => u.name.localeCompare(user.name) > 0);\r\n        if (insertIndex === -1) {\r\n            insertIndex = state.users.length;\r\n\r\n            state.users.splice(insertIndex, 0, user);\r\n            return {\r\n                type: \"add\",\r\n                user: user,\r\n                state: state\r\n            };\r\n        }\r\n    };\r\n}\r\n\r\nfunction opRemove(user) {\r\n    return state => {\r\n        const index = _.findIndex(state.users, { name: user.name });\r\n        if (index !== -1) {\r\n            state.users.splice(index, 1);\r\n        }\r\n        return {\r\n            type: \"remove\",\r\n            user: user,\r\n            state: state\r\n        };\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/stores/users.js","import {Validator} from \"../validator\";\r\n\r\nexport let USERNAME_REGEX = /^[\\w\\d_-]+$/;\r\n\r\nexport function validateLogin(username) {\r\n    const validator = new Validator();\r\n\r\n    if (username.length >= 20){\r\n        validator.error(\"Username must be fewer than 20 characters\");\r\n    }\r\n    if (!USERNAME_REGEX.test(username)) {\r\n        validator.error(\"Username can only contain letters, numbers, underscores and dashes\");\r\n    }\r\n    return validator;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validation/users.js","import { Observable } from \"rxjs\";\r\n\r\nexport class Validator {\r\n    get isValid() { return !this._errors.length; }\r\n    get errors() { return this._errors; }\r\n    get message() { return this._errors.join(\", \");}\r\n\r\n    constructor() {\r\n        this._errors = [];\r\n    }\r\n\r\n    error(message) {\r\n        this._errors.push(message);\r\n    }\r\n\r\n    toObject() {\r\n        if(this.isValid){\r\n            return {};\r\n        }\r\n        return {\r\n            errors: this._errors,\r\n            message: this.message\r\n        };\r\n    }\r\n\r\n    throw$() {\r\n        return Observable.throw({\r\n            clientMessage: this.message\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validator.js","import { Observable } from \"rxjs\";\r\nimport { validateSendMessage } from \"shared/validation/chat\";\r\n\r\nexport class ChatStore {\r\n    constructor(server, userStore) {\r\n        this._server = server;\r\n        this._users = userStore;\r\n\r\n        this.messages$ = Observable.merge(\r\n            server.on$(\"chat:list\").flatMap(list => Observable.from(list)),\r\n            server.on$(\"chat:added\"))\r\n            .publishReplay(100);\r\n\r\n        this.messages$.connect();\r\n\r\n        server.on$(\"connect\")\r\n            .first()\r\n            .subscribe(() => server.emit(\"chat:list\"));\r\n    }\r\n\r\n    sendMessage$(message, type = \"normal\") {\r\n        const validator = validateSendMessage(this._users.currentUser, message, type);\r\n        if (!validator.isValid) {\r\n            return Observable.throw({ message: validator.message });\r\n        }\r\n        return this._server.emitAction$(\"chat:add\", { message, type });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/stores/chat.js","import _ from \"lodash\";\r\nimport {Validator} from \"../validator\";\r\n\r\nexport let MESSAGE_TYPES = [\"normal\"];\r\n\r\nexport function validateSendMessage(user, message, type) {\r\n    const validator = new Validator();\r\n\r\n    if (message.length > 50) {\r\n        validator.error(\"Message must be smaller 50 characters\");\r\n    } \r\n    if (!_.includes(MESSAGE_TYPES, type)){\r\n        validator.error(`Invalid message type: ${type}`);\r\n    }\r\n    if (message.trim().length === 0 ){\r\n        validator.error(\"Message cannot be blank\");\r\n    }\r\n\r\n    return validator;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/validation/chat.js","import $ from \"jquery\";\r\nimport {ElementComponent} from \"../../lib/component\";\r\nimport \"./player.scss\";\r\n\r\nclass PlayerComponent extends ElementComponent {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    _onAttach() {\r\n        const $title = this._$mount.find(\"h1\");\r\n        $title.text(\"Player\");\r\n\r\n        this.$element.append(\"<h1>Video Player Here</h1>\");\r\n    }\r\n}\r\n\r\nlet component;\r\ntry {\r\n    component = new PlayerComponent();\r\n    component.attach($(\"section.player\"));\r\n    \r\n} catch (err) {\r\n    console.error(err);\r\n    if (component) {\r\n        component.detach();\r\n    }\r\n}\r\nfinally {\r\n    if(module.hot) {\r\n        module.hot.accept();\r\n        module.hot.dispose(() => component && component.detach());\r\n    }\r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/client/components/player/player.js","import $ from \"jquery\";\r\n\r\nimport {Observable} from \"rxjs\";\r\n\r\nObservable.prototype.compSubscribe = function(component, ...args) {\r\n\tlet subscription = this.safeSubscribe(...args);\r\n\tcomponent._onDetachHandlers.push(() => subscription.unsubscribe());\r\n\treturn subscription;\r\n};\r\n\r\nexport class ComponentBase {\r\n\tattach($mount) {\r\n\t\tthis._$mount = $mount;\r\n\t\tthis._onDetachHandlers = [];\r\n\t\tthis.children = [];\r\n\t\tthis._onAttach();\r\n\t}\r\n\t\r\n\tdetach() {\r\n\t\tthis._onDetach();\r\n\t\t\r\n\t\tfor (let handler of this._onDetachHandlers)\r\n\t\t\thandler();\r\n\t\t\t\r\n\t\tfor (let child of this.children)\r\n\t\t\tchild.detach();\r\n\t\t\t\r\n\t\tthis._onDetachHandlers = [];\r\n\t\tthis.children = [];\r\n\t}\r\n\t\r\n\t_onAttach() {\r\n\t}\r\n\t\r\n\t_onDetach() {\r\n\t}\r\n}\r\n\r\nexport class ElementComponent extends ComponentBase {\r\n\tget $element() { return this._$element; }\r\n\t\r\n\tconstructor(elementType = \"div\") {\r\n\t\tsuper();\r\n\t\tthis._$element = $(`<${elementType}>`).data(\"component\", this);\r\n\t}\r\n\t\r\n\tattach($mount) {\r\n\t\tsuper.attach($mount);\r\n\t\tthis.$element.appendTo(this._$mount);\r\n\t}\r\n\t\r\n\tdetach() {\r\n\t\tsuper.detach();\r\n\t\tthis.$element.remove();\r\n\t}\r\n\t\r\n\t_setClass(className, isOn) {\r\n\t\tif (isOn)\r\n\t\t\tthis._$element.addClass(className);\r\n\t\telse\r\n\t\t\tthis._$element.removeClass(className);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/lib/component.js","import $ from \"jquery\";\r\nimport {ElementComponent} from \"../../lib/component\";\r\nimport \"./users.scss\";\r\nimport {usersStore} from \"../../services\";\r\n\r\nclass UsersComponent extends ElementComponent {\r\n    constructor(usersStore) {\r\n        super(\"ul\");\r\n        this.$element.addClass(\"users\");\r\n        this._users = usersStore;\r\n    }\r\n\r\n    _onAttach() {\r\n        const $title = this._$mount.find(\"> h1\");\r\n\r\n        this._users.state$\r\n            .map(action => action.state.users)\r\n            .compSubscribe(this, users => {\r\n                $title.text(`${users.length} user${users.length != 1? \"s\" : \"\"}`);\r\n\r\n                this.$element.empty();\r\n                for(let user of users) {\r\n                    const $name = $(`<span class=\"name\" />`).text(user.name).css(\"color\", user.color);\r\n                    const $userElement = $(`<li />`).append($name);\r\n                    this.$element.append($userElement);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nlet component;\r\ntry {\r\n    component = new UsersComponent(usersStore);\r\n    component.attach($(\"section.users\"));\r\n    \r\n} catch (err) {\r\n    console.error(err);\r\n    if (component) {\r\n        component.detach();\r\n    }\r\n}\r\nfinally {\r\n    if(module.hot) {\r\n        module.hot.accept();\r\n        module.hot.dispose(() => component && component.detach());\r\n    }\r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/client/components/users/users.js","import $ from \"jquery\";\r\nimport {ComponentBase} from \"../../lib/component\";\r\nimport \"./chat.scss\";\r\nimport {usersStore, chatStore, server} from \"../../services\";\r\nimport {ChatListComponent} from \"./list\";\r\nimport {ChatFormComponent} from \"./form\";\r\n\r\nclass ChatComponent extends ComponentBase {\r\n    constructor(server, usersStore, chatStore) {\r\n        super();\r\n        this._server = server;\r\n        this._users = usersStore;\r\n        this._chat = chatStore;\r\n    }\r\n\r\n    _onAttach() {\r\n        const $title = this._$mount.find(\"> h1\");\r\n        $title.text(\"Chat\");\r\n\r\n    const list = new ChatListComponent(this._server, this._users, this._chat);\r\n    list.attach(this._$mount);\r\n    this.children.push(list);\r\n\r\n    const form = new ChatFormComponent(this._users, this._chat);\r\n    form.attach(this._$mount);\r\n    this.children.push(form);\r\n    }\r\n}\r\n\r\nlet component;\r\ntry {\r\n    component = new ChatComponent(server, usersStore, chatStore);\r\n    component.attach($(\"section.chat\"));\r\n    \r\n} catch (err) {\r\n    console.error(err);\r\n    if (component) {\r\n        component.detach();\r\n    }\r\n}\r\nfinally {\r\n    if(module.hot) {\r\n        module.hot.accept();\r\n        module.hot.dispose(() => component && component.detach());\r\n    }\r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/client/components/chat/chat.js","import $ from \"jquery\";\r\nimport moment from \"moment\";\r\nimport {Observable} from \"rxjs\";\r\n\r\nimport {ElementComponent} from \"../../lib/component\";\r\n\r\nexport class ChatListComponent extends ElementComponent {\r\n\tconstructor(server, usersStore, chatStore) {\r\n\t\tsuper(\"ul\");\r\n\t\tthis._server = server;\r\n\t\tthis._users = usersStore;\r\n\t\tthis._chat = chatStore;\r\n\t\tthis.$element.addClass(\"chat-messages\");\r\n\t}\r\n\t\r\n\t_onAttach() {\r\n\t\tObservable.merge(\r\n\t\t\tthis._chat.messages$.map(chatMessageFactory),\r\n\t\t\tthis._users.state$.map(userActionFactory),\r\n\t\t\tthis._server.status$.map(serverStatusFactory))\r\n\t\t\t.filter(m => m)\r\n\t\t\t.compSubscribe(this, $newElement => {\r\n\t\t\t\tthis.$element.append($newElement);\r\n\t\t\t\tthis.$element[0].scrollTop = this.$element[0].scrollHeight;\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nfunction serverStatusFactory({isConnected, isReconnecting, attempt}) {\r\n\tlet statusMessage = null;\r\n\tif (isConnected) statusMessage = \"connected\";\r\n\telse if (isReconnecting) statusMessage = `reconnecting (attempt ${attempt})`;\r\n\telse statusMessage = \"gg. it's over now\";\r\n\t\r\n\tif (statusMessage == null)\r\n\t\treturn null;\r\n\t\t\r\n\treturn $(`<li class=\"server-status\" />`).append([\r\n\t\t$(`<span class=\"author\" />`).text(\"system\"),\r\n\t\t$(`<span class=\"message\" />`).text(statusMessage),\r\n\t\t$(`<time />`).text(moment().format(\"h:mm:ss a\"))\r\n\t]);\r\n}\r\n\r\nfunction userActionFactory({type, user}) {\r\n\tif (type !== \"add\" && type !== \"remove\")\r\n\t\treturn null;\r\n\t\t\r\n\treturn $(`<li class=\"user-action ${type}\" />`).append([\r\n\t\t$(`<span class=\"author\" />`).text(user.name).css(\"color\", user.color),\r\n\t\t$(`<span class=\"message\" />`).text(type === \"add\" ? \"joined\" : \"left\"),\r\n\t\t$(`<time />`).text(moment().format(\"h:mm:ss a\"))\r\n\t]);\r\n}\r\n\r\nfunction chatMessageFactory({user, message, type, time}) {\r\n\treturn $(`<li class=\"message ${type}\" />`)\r\n\t\t.data(\"user\", user.name)\r\n\t\t.append([\r\n\t\t\t$(`<span class=\"author\" />`).text(user.name).css(\"color\", user.color),\r\n\t\t\t$(`<span class=\"message\" />`).text(message),\r\n\t\t\t$(`<time />`).text(moment(time).format(\"h:mm:ss a\"))\r\n\t\t]);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/chat/list.js","import $ from \"jquery\";\r\nimport {Observable} from \"rxjs\";\r\n\r\nimport {ElementComponent} from \"../../lib/component\";\r\n\r\nexport class ChatFormComponent extends ElementComponent {\r\n\tconstructor(usersStore, chatStore) {\r\n\t\tsuper(\"div\");\r\n\t\tthis._users = usersStore;\r\n\t\tthis._chat = chatStore;\r\n\t\tthis.$element.addClass(\"chat-form\");\r\n\t}\r\n\t\r\n\t_onAttach() {\r\n\t\tthis._$error = $(`<div class=\"chat-error\" />`).appendTo(this.$element);\r\n\t\tthis._$input = $(`<input type=\"text\" class=\"chat-input\" />`).appendTo(this.$element);\r\n\t\t\r\n\t\tthis._users.currentUser$.compSubscribe(this, user => {\r\n\t\t\tthis._$input.attr(\"placeholder\", user.isLoggedIn ? \"\" : \"Enter a username\");\r\n\t\t});\r\n\t\t\r\n\t\tObservable.fromEvent(this._$input, \"keydown\")\r\n\t\t\t.filter(e => e.keyCode === 13 /* keycode for enter */)\r\n\t\t\t.do(e => e.preventDefault())\r\n\t\t\t.map(e => e.target.value.trim())\r\n\t\t\t.filter(e => e.length)\r\n\t\t\t.withLatestFrom(this._users.currentUser$)\r\n\t\t\t.flatMap(([value, user]) => {\r\n\t\t\t\treturn user.isLoggedIn ? this._sendMessage$(value) : this._login$(value);})\r\n\t\t\t.compSubscribe(this, response => {\r\n\t\t\t\tif (response && response.error)\r\n\t\t\t\t\tthis._$error.show().text(response.error.message);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._$error.hide();\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t_sendMessage$(message) {\r\n\t\treturn this._chat.sendMessage$(message).catchWrap()\r\n\t\t\t.do(() => this._$input.val(\"\"));\r\n\t}\r\n\t\r\n\t_login$(username) {\r\n\t\tthis._$input.attr(\"disabled\", \"disabled\");\r\n\t\treturn this._users.login$(username).catchWrap()\r\n\t\t\t.do(() => this._$input.val(\"\"))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis._$input.attr(\"disabled\", null);\r\n\t\t\t\tthis._$input.focus();\r\n\t\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/chat/form.js","import $ from \"jquery\";\r\nimport \"./playlist.scss\";\r\nimport {ComponentBase} from \"../../lib/component\";\r\nimport {PlaylistListComponent} from \"./list\";\r\nimport {PlaylistToolbarComponent} from \"./toolbar\";\r\nimport {PlaylistContextMenuComponent} from \"./context-menu\";\r\nimport {PlaylistChromeComponent} from \"./chrome\";\r\n\r\n\r\nclass PlaylistComponent extends ComponentBase {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    _onAttach() {\r\n        const $title = this._$mount.find(\"> h1\");\r\n        $title.text(\"Playlist\");\r\n\r\n        const toolbar = new PlaylistToolbarComponent();\r\n        toolbar.attach(this._$mount);\r\n        this._$chrome = $(`<div class=\"chrome\" />`).appendTo(this._$mount);\r\n        this._$scrollArea = $(`<div class=\"scroll-area\" />`).appendTo(this._$chrome);\r\n\r\n        const list = new PlaylistListComponent();\r\n        list.attach(this._$scrollArea);\r\n\r\n        const contextMenu = new PlaylistContextMenuComponent();\r\n        contextMenu.attach(this._$scrollArea);\r\n\r\n        const chrome = new PlaylistChromeComponent();\r\n        chrome.attach(this._$chrome);\r\n\r\n        this.children.push(toolbar, list, contextMenu, chrome); \r\n    }\r\n\r\n    _onDetach() {\r\n        this._$chrome.remove();\r\n    }\r\n}\r\n\r\nlet component;\r\ntry {\r\n    component = new PlaylistComponent();\r\n    component.attach($(\"section.playlist\"));\r\n    \r\n} catch (err) {\r\n    console.error(err);\r\n    if (component) {\r\n        component.detach();\r\n    }\r\n}\r\nfinally {\r\n    if(module.hot) {\r\n        module.hot.accept();\r\n        module.hot.dispose(() => component && component.detach());\r\n    }\r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/playlist.js","import $ from \"jquery\";\r\nimport {ElementComponent} from \"../../lib/component\";\r\nimport {PlayListSortComponent} from \"./sort\";\r\n\r\nexport class PlaylistListComponent extends ElementComponent {\r\n    constructor() {\r\n        super(\"ul\");\r\n        this.$element.addClass(\"playlist-list\");\r\n    }\r\n\r\n    _onAttach() {\r\n        const sort = new PlayListSortComponent();\r\n        sort.attach(this._$mount);\r\n        this.children.push(sort);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/list.js","import $ from \"jquery\";\r\nimport {ComponentBase} from \"../../lib/component\";\r\n\r\nexport class PlayListSortComponent extends ComponentBase {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/sort.js","import $ from \"jquery\";\r\nimport {ElementComponent} from \"../../lib/component\";\r\n\r\nexport class PlaylistToolbarComponent extends ElementComponent {\r\n    constructor() {\r\n        super(\"div\");\r\n        this.$element.addClass(\"toolbar\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/toolbar.js","import $ from \"jquery\";\r\nimport {ElementComponent} from \"../../lib/component\";\r\n\r\nexport class PlaylistContextMenuComponent extends ElementComponent {\r\n    constructor() {\r\n        super(\"div\");\r\n        this.$element.addClass(\"context-menu\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/context-menu.js","import $ from \"jquery\";\r\nimport {ComponentBase} from \"../../lib/component\";\r\n\r\nexport class PlaylistChromeComponent extends ComponentBase {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/playlist/chrome.js"],"sourceRoot":""}